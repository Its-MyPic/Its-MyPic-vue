const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Db6g-hYz.js","assets/@vue-WVfTJAwV.js","assets/vuetify-xHl4lU3s.js","assets/vuetify-B8gNaNkA.css","assets/@mdi-DKC2W5MC.js","assets/pinia-ZzUXZ5tu.js","assets/@ffmpeg-B1ncfXmI.js","assets/vue-virtual-scroll-grid-BzIoNprJ.js","assets/vite-ssg-CaviuLAv.js","assets/@unhead-DQR5zzVu.js","assets/unhead-NLvR5cop.js","assets/hookable-B8xFkYCm.js","assets/vue-router-DxF8NQ87.js","assets/protobufjs-CgPuVhCO.js","assets/@protobufjs-f4nnaicZ.js","assets/opencc-js-kMbEc8rw.js","assets/index-Bbd288dl.css"])))=>i.map(i=>d[i]);
var j=Object.defineProperty;var C=(i,t,r)=>t in i?j(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var I=(i,t,r)=>C(i,typeof t!="symbol"?t+"":t,r);import{V as q}from"./vite-ssg-CaviuLAv.js";import{d as _,c as B}from"./pinia-ZzUXZ5tu.js";import{m as w}from"./protobufjs-CgPuVhCO.js";import{r as d,S as O,d as A,w as R,k as U,l as M,L as N,a5 as V,A as J,B as Q,C as b,W as x}from"./@vue-WVfTJAwV.js";import{C as $,f as L}from"./opencc-js-kMbEc8rw.js";import{V as G,a as W,c as Y,m as z,b as K,d as H}from"./vuetify-xHl4lU3s.js";import"./@unhead-DQR5zzVu.js";import"./unhead-NLvR5cop.js";import"./hookable-B8xFkYCm.js";import"./vue-router-DxF8NQ87.js";import"./@protobufjs-f4nnaicZ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const h=w.Reader,F=w.Writer,y=w.util,u=w.roots.default||(w.roots.default={}),X=u.data=(()=>{const i={};return i.Info=function(){function t(r){if(r)for(let e=Object.keys(r),n=0;n<e.length;++n)r[e[n]]!=null&&(this[e[n]]=r[e[n]])}return t.prototype.text="",t.prototype.season=0,t.prototype.episode=0,t.prototype.frameStart=0,t.prototype.framePrefer=0,t.prototype.frameEnd=0,t.prototype.segmentId=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=F.create()),e.text!=null&&Object.hasOwnProperty.call(e,"text")&&n.uint32(10).string(e.text),e.season!=null&&Object.hasOwnProperty.call(e,"season")&&n.uint32(16).int32(e.season),e.episode!=null&&Object.hasOwnProperty.call(e,"episode")&&n.uint32(24).int32(e.episode),e.frameStart!=null&&Object.hasOwnProperty.call(e,"frameStart")&&n.uint32(32).int32(e.frameStart),e.framePrefer!=null&&Object.hasOwnProperty.call(e,"framePrefer")&&n.uint32(40).int32(e.framePrefer),e.frameEnd!=null&&Object.hasOwnProperty.call(e,"frameEnd")&&n.uint32(48).int32(e.frameEnd),e.segmentId!=null&&Object.hasOwnProperty.call(e,"segmentId")&&n.uint32(56).int32(e.segmentId),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof h||(e=h.create(e));let o=n===void 0?e.len:e.pos+n,a=new u.data.Info;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{a.text=e.string();break}case 2:{a.season=e.int32();break}case 3:{a.episode=e.int32();break}case 4:{a.frameStart=e.int32();break}case 5:{a.framePrefer=e.int32();break}case 6:{a.frameEnd=e.int32();break}case 7:{a.segmentId=e.int32();break}default:e.skipType(s&7);break}}return a},t.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.text!=null&&e.hasOwnProperty("text")&&!y.isString(e.text)?"text: string expected":e.season!=null&&e.hasOwnProperty("season")&&!y.isInteger(e.season)?"season: integer expected":e.episode!=null&&e.hasOwnProperty("episode")&&!y.isInteger(e.episode)?"episode: integer expected":e.frameStart!=null&&e.hasOwnProperty("frameStart")&&!y.isInteger(e.frameStart)?"frameStart: integer expected":e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&!y.isInteger(e.framePrefer)?"framePrefer: integer expected":e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&!y.isInteger(e.frameEnd)?"frameEnd: integer expected":e.segmentId!=null&&e.hasOwnProperty("segmentId")&&!y.isInteger(e.segmentId)?"segmentId: integer expected":null},t.fromObject=function(e){if(e instanceof u.data.Info)return e;let n=new u.data.Info;return e.text!=null&&(n.text=String(e.text)),e.season!=null&&(n.season=e.season|0),e.episode!=null&&(n.episode=e.episode|0),e.frameStart!=null&&(n.frameStart=e.frameStart|0),e.framePrefer!=null&&(n.framePrefer=e.framePrefer|0),e.frameEnd!=null&&(n.frameEnd=e.frameEnd|0),e.segmentId!=null&&(n.segmentId=e.segmentId|0),n},t.toObject=function(e,n){n||(n={});let o={};return n.defaults&&(o.text="",o.season=0,o.episode=0,o.frameStart=0,o.framePrefer=0,o.frameEnd=0,o.segmentId=0),e.text!=null&&e.hasOwnProperty("text")&&(o.text=e.text),e.season!=null&&e.hasOwnProperty("season")&&(o.season=e.season),e.episode!=null&&e.hasOwnProperty("episode")&&(o.episode=e.episode),e.frameStart!=null&&e.hasOwnProperty("frameStart")&&(o.frameStart=e.frameStart),e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&(o.framePrefer=e.framePrefer),e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&(o.frameEnd=e.frameEnd),e.segmentId!=null&&e.hasOwnProperty("segmentId")&&(o.segmentId=e.segmentId),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,w.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Info"},t}(),i.Data=function(){function t(r){if(this.info=[],r)for(let e=Object.keys(r),n=0;n<e.length;++n)r[e[n]]!=null&&(this[e[n]]=r[e[n]])}return t.prototype.info=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=F.create()),e.info!=null&&e.info.length)for(let o=0;o<e.info.length;++o)u.data.Info.encode(e.info[o],n.uint32(10).fork()).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof h||(e=h.create(e));let o=n===void 0?e.len:e.pos+n,a=new u.data.Data;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{a.info&&a.info.length||(a.info=[]),a.info.push(u.data.Info.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}return a},t.decodeDelimited=function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.info!=null&&e.hasOwnProperty("info")){if(!Array.isArray(e.info))return"info: array expected";for(let n=0;n<e.info.length;++n){let o=u.data.Info.verify(e.info[n]);if(o)return"info."+o}}return null},t.fromObject=function(e){if(e instanceof u.data.Data)return e;let n=new u.data.Data;if(e.info){if(!Array.isArray(e.info))throw TypeError(".data.Data.info: array expected");n.info=[];for(let o=0;o<e.info.length;++o){if(typeof e.info[o]!="object")throw TypeError(".data.Data.info: object expected");n.info[o]=u.data.Info.fromObject(e.info[o])}}return n},t.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.info=[]),e.info&&e.info.length){o.info=[];for(let a=0;a<e.info.length;++a)o.info[a]=u.data.Info.toObject(e.info[a],n)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,w.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Data"},t}(),i})();var Z=(i=>(i[i.MYGO=1]="MYGO",i[i.AVE_MUJICA=2]="AVE_MUJICA",i))(Z||{});const Fe={1:"MyGO",2:"Ave Mujica"},T=Array.from({length:13},(i,t)=>t+1),Te=23.976,ke=[0,0,34288,68333,0,0,0,0,0,0,0,0,0];function ee(i){const t={text:i.text||"",season:i.season||0,episode:i.episode||0,segmentId:i.segmentId||0,frame:{start:i.frameStart||0,prefer:i.framePrefer||0,end:i.frameEnd||0}};return{...t,toJSON(){return{...t,frame:{...t.frame}}}}}const D=_("data",()=>{const i=d([]),t=d(!1),r=d(null),e=async()=>{if(!(i.value.length>0)){t.value=!0,r.value=null;try{const o=await(await fetch("/data/data.bin")).arrayBuffer(),a=X.Data.decode(new Uint8Array(o));i.value=a.info.map(s=>ee(s))}catch(n){r.value=n instanceof Error?n:new Error("Failed to fetch cards"),i.value=[]}finally{t.value=!1}}};return{cards:O(i),isLoading:O(t),error:O(r),fetchCards:e}}),te=_("filter",()=>{const i=()=>{const c=new URLSearchParams(window.location.search).get("ep");if(!c)return{mygo:[],avemujica:[]};const l=parseInt(c),v=T.filter(f=>(l&1<<f-1)!==0),S=T.filter(f=>(l&1<<f+12)!==0);return{mygo:v,avemujica:S}},t=i(),r=d([...t.mygo]),e=d([...t.avemujica]),n=d(0),o=d([...t.mygo]),a=d([...t.avemujica]),s=d(0),p=A(()=>({mygo:new Set(o.value),avemujica:new Set(a.value),character:s.value}));function P(c,l){if(c.length!==l.length)return!1;const v=[...c].sort((f,g)=>f-g),S=[...l].sort((f,g)=>f-g);return v.every((f,g)=>f===S[g])}const E=()=>{const c=new URL(window.location.href);let l=0;o.value.forEach(f=>{l|=1<<f-1}),a.value.forEach(f=>{l|=1<<f+12});const v=c.searchParams.get("ep"),S=l===0?null:l.toString();return v===S?(console.debug("Filter params unchanged, skip updating URL"),!1):(l===0?c.searchParams.delete("ep"):c.searchParams.set("ep",l.toString()),window.history.pushState({},"",c.toString()),!0)};return{mygoEpisodesBuffer:r,avemujicaEpisodesBuffer:e,characterIdBuffer:n,mygoEpisodes:o,avemujicaEpisodes:a,characterId:s,activeFilters:p,flush:()=>{const c=P(r.value,o.value),l=P(e.value,a.value),v=n.value===s.value;return c&&l&&v?(console.debug("Filter state unchanged, skip updating"),!1):(o.value=[...r.value],a.value=[...e.value],s.value=n.value,E(),!0)},parseInitialEpisodes:i}});function ne(i,t){let r;return function(...e){clearTimeout(r),r=setTimeout(()=>i(...e),t)}}const re=[["你","妳"],["阿","啊"],["他","她"],["…","..."],["＂",'"'],["？","?"],["！","!"],["：",":"],["、","'"],["，",","]],oe=$(L.cn,L.tw.concat([re]));function ie(i){return oe(i.trim()).toLowerCase()}const ae=_("search",()=>{const i=d(new URLSearchParams(window.location.search).get("q")||""),t=d(new URLSearchParams(window.location.search).get("q")||""),r=A(()=>t.value?ie(t.value):""),e=()=>{const o=new URL(window.location.href),a=o.searchParams.get("q"),s=t.value===""?null:t.value;return a===s?(console.debug("Query params unchanged, skip updating URL"),!1):(t.value===""?o.searchParams.delete("q"):o.searchParams.set("q",t.value),window.history.pushState({},"",o.toString()),!0)},n=()=>i.value===t.value?(console.debug("Query unchanged, skip updating"),!1):(t.value=i.value,e(),!0);return R(i,ne(o=>{if(o===t.value){console.debug("Query unchanged, skip updating");return}t.value=o,e()},500)),{queryBuffer:i,query:t,normalizedQuery:r,flush:n}}),se=U({__name:"App",setup(i){const t=D(),r=ae(),e=te(),n=()=>{const o=new URLSearchParams(window.location.search).get("q")||"";r.queryBuffer=o,r.query=o;const a=e.parseInitialEpisodes();e.mygoEpisodes=[...a.mygo],e.avemujicaEpisodes=[...a.avemujica],e.mygoEpisodesBuffer=[...a.mygo],e.avemujicaEpisodesBuffer=[...a.avemujica]};return M(async()=>{await t.fetchCards(),window.addEventListener("popstate",n)}),N(()=>{window.removeEventListener("popstate",n)}),(o,a)=>{const s=V("router-view");return Q(),J(W,null,{default:b(()=>[x(G,null,{default:b(()=>[x(s)]),_:1})]),_:1})}}});class le{constructor(t,r,e=1300){I(this,"element");this.element=t,this.element._longPressCallBack=r,this.element._longPressStart=this.start,this.element._longPressStop=this.stop,this.element._longPressMove=this.move,this.element._longPressDelay=e,this.element._longPressDestroy=this.destroy(this.element),this.element._longPressIsStart=!1,this.element._longPressTimer=null,this.element.addEventListener("pointerdown",this.element._longPressStart),this.element.addEventListener("pointerup",this.element._longPressStop),this.element.addEventListener("pointermove",this.element._longPressMove)}start(t){const r=this;r._longPressTimer===null&&!r._longPressIsStart&&(r._longPressIsStart=!0,r._longPressTimer=window.setTimeout(()=>{r._longPressCallBack(t),r._longPressStop(t)},r._longPressDelay))}stop(){const t=this;t._longPressTimer&&clearTimeout(t._longPressTimer),t._longPressTimer=null,t._longPressIsStart=!1}move(t){const r=this;r._longPressIsStart&&(r._longPressTimer&&clearTimeout(r._longPressTimer),r._longPressTimer=window.setTimeout(()=>{r._longPressCallBack(t),r._longPressStop(t)},r._longPressDelay))}destroy(t){return()=>{t.removeEventListener("pointerdown",this.start),t.removeEventListener("pinterup",this.stop),t.removeEventListener("pointermove",this.move)}}}function ce(i,t){new le(i,t.value,250)}function fe(i){i._longPressDestroy()}const ue={mounted:ce,beforeUnmount:fe},de=Y({blueprint:H,icons:{defaultSet:"mdi",aliases:K,sets:{mdi:z}},theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}}),pe="modulepreload",me=function(i){return"/"+i},k={},he=function(t,r,e){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(r.map(p=>{if(p=me(p),p in k)return;k[p]=!0;const P=p.endsWith(".css"),E=P?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const m=document.createElement("link");if(m.rel=P?"stylesheet":pe,P||(m.as="script"),m.crossOrigin="",m.href=p,s&&m.setAttribute("nonce",s),document.head.appendChild(m),P)return new Promise((c,l)=>{m.addEventListener("load",c),m.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return n.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})},ye=[{path:"/",name:"/",component:()=>he(()=>import("./index-Db6g-hYz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))}];q(se,{routes:ye},({app:i,router:t,initialState:r})=>{i.use(de),i.directive("longPress",ue);const e=B();i.use(e),e.state.value=r.pinia||{},D(e).fetchCards()});export{T as E,Te as F,ke as M,Z as S,te as a,ae as b,Fe as c,ie as n,D as u};
