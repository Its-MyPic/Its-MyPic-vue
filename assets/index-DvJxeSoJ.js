var De=Object.defineProperty;var $e=(p,l,a)=>l in p?De(p,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):p[l]=a;var re=(p,l,a)=>$e(p,typeof l!="symbol"?l+"":l,a);import{r as g,c as A,k as T,D as k,I as q,X as e,F as t,a5 as V,a7 as b,J as ce,l as le,E as _,u as v,a8 as ie,$ as D,a2 as Te,B as Ee,L as Ve,O as Ge,a9 as Ae,aa as Le,ab as Pe,w as Oe,Y as je,ac as ze}from"./@vue-CNCR8Vmv.js";import{e as z,f as Ne,g as ue,h as de,i as oe,j as S,k as Q,l as me,u as Be,n as Ye,o as Y,p as j,q as qe,r as Qe,s as te,t as O,v as B,w as ve,x as ke,y as Se,z as We,A as He,B as ge,C as Je,D as Ze}from"./vuetify-BEJceuSt.js";import{m as P,a as we,b as Ke,c as Xe,d as et}from"./@mdi-DKC2W5MC.js";import{u as tt,a as _e,b as Ce,S as E,n as at,c as ye,M as lt,F as he,E as be,d as ot}from"./app-DQ6CEqKz.js";import{d as Ie,s as nt}from"./pinia-CqnXpMGa.js";import{f as st,F as rt}from"./@ffmpeg-B1ncfXmI.js";import{G as it}from"./vue-virtual-scroll-grid-DXBkyr0D.js";import"./vite-ssg-BS1pftyc.js";import"./vue-router-CD0sU4wl.js";import"./@unhead-DdWKJI7U.js";import"./unhead-Daxt54K7.js";import"./hookable-B7_1qfUG.js";import"./protobufjs-CgPuVhCO.js";import"./@protobufjs-f4nnaicZ.js";import"./opencc-js-D-mJJ3do.js";const W=Ie("ui",()=>{const p=g(!1),l=g(!1);return{isReversed:p,copyMode:l,toggleReverse:()=>{p.value=!p.value},toggleCopyMode:()=>{l.value=!l.value}}});class ut{constructor(l){re(this,"cache");re(this,"capacity");this.cache=new Map,this.capacity=l}has(l){return this.cache.has(l)}get(l){const a=this.cache.get(l);if(a)return this.cache.delete(l),this.cache.set(l,a),a}set(l,a){if(this.cache.has(l))this.cache.delete(l);else if(this.cache.size>=this.capacity){const r=this.cache.keys().next();r.done||this.cache.delete(r.value)}this.cache.set(l,a)}clear(){this.cache.clear()}}const dt=Ie("results",()=>{const p=tt(),l=_e(),a=Ce(),r=W(),u=new ut(50);return{filteredCards:A(()=>{const y=p.cards;if(!y.length)return[];const i=l.activeFilters,s=JSON.stringify({mygo:Array.from(i.mygo),avemujica:Array.from(i.avemujica)});let n;return u.has(s)?n=u.get(s):(n=y.filter(c=>i.mygo.size&&c.season===E.MYGO?i.mygo.has(c.episode):i.avemujica.size&&c.season===E.AVE_MUJICA?i.avemujica.has(c.episode):i.mygo.size===0&&i.avemujica.size===0),u.set(s,n)),a.normalizedQuery&&(n=n.filter(c=>at(c.text).includes(a.normalizedQuery))),r.isReversed?[...n].reverse():n})}}),ct="MTMzNTEwMzQ1NzY4MTczNTc2MC9LT0lwZ2FDc3RmRURnVHVqR2dEYmVYWWZSLUdZRjVQQ29veXZ0TFVGbFhFM0tYdGRGTzhHR3RrTXptWEp4R3FxQVI5bw==",mt={MyGO:{1:"https://www.youtube.com/watch?v=WOrYBIYIwyk",2:"https://www.youtube.com/watch?v=WOrYBIYIwyk",3:"https://www.youtube.com/watch?v=WOrYBIYIwyk",4:"https://www.youtube.com/watch?v=ijdspfPMzYc",5:"https://www.youtube.com/watch?v=zfA0zRAkAdk",6:"https://www.youtube.com/watch?v=UwgyEoB9vU8",7:"https://www.youtube.com/watch?v=rlY2b3TIYPs",8:"https://www.youtube.com/watch?v=mfboDpl88QY",9:"https://www.youtube.com/watch?v=ySjYENzyZmY",10:"https://www.youtube.com/watch?v=bLWDIYpGcEI",11:"https://www.youtube.com/watch?v=gAFDVnhX24o",12:"https://www.youtube.com/watch?v=wei3payuSi8",13:"https://www.youtube.com/watch?v=uQ3_PvPCNnI"},"Ave Mujica":{1:"https://www.youtube.com/watch?v=dxmmSFQxWzM",2:"https://www.youtube.com/watch?v=Bzl61esi4qc",3:"https://www.youtube.com/watch?v=HagaJboujK4",4:"https://www.youtube.com/watch?v=Z6cOxtDsfNU",5:"https://www.youtube.com/watch?v=7D2uGv7aprQ",6:"https://www.youtube.com/watch?v=jQraN1emvLQ",7:"https://www.youtube.com/watch?v=RONGNWb7OpQ",8:"https://www.youtube.com/watch?v=uh9jUhVTS28",9:"https://www.youtube.com/watch?v=pGrI6hk0vBg",10:"https://www.youtube.com/watch?v=m9cjOcCKIyQ",11:"https://www.youtube.com/watch?v=Cfm8TWGkvYQ",12:"https://www.youtube.com/watch?v=UtSEFdDZZLw"}},ae={webhook:ct,videoLink:mt},Me=T({__name:"ReportDialog",props:{fileName:{type:String,required:!1,default:""},text:{type:String,required:!1,default:""}},setup(p){const l=p,a=g(""),r=g(""),u=g(!1),m=g(!1);async function y(){let i="";if(a.value&&(i+=`問題: ${a.value}
`),r.value&&(i+=`聯絡方式: ${r.value}
`),l.fileName&&(i+=`檔案名稱: ${l.fileName}
`),l.text&&(i+=`文字: ${l.text}
`),i){const s={content:i};await fetch(`https://discord.com/api/webhooks/${atob(ae.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),u.value=!0}m.value=!1}return(i,s)=>(k(),q(ce,null,[e(Q,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=n=>m.value=n),activator:"parent","max-width":"600px",style:{maxHeight:"90vh"},transition:"dialog-bottom-transition"},{default:t(()=>[e(z,null,{default:t(()=>[e(Ne,null,{default:t(()=>s[4]||(s[4]=[V("回報問題")])),_:1}),e(ue,null,{default:t(()=>[e(de,{label:"你遭遇到的問題(選填)",modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=n=>a.value=n),outlined:""},null,8,["modelValue"]),e(de,{label:"你的聯絡方式(選填)",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=n=>r.value=n),outlined:""},null,8,["modelValue"])]),_:1}),e(oe,null,{default:t(()=>[e(S,{onClick:y},{default:t(()=>s[5]||(s[5]=[V("送出")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=n=>u.value=n),timeout:2e3,class:"text-center",rounded:"pill"},{default:t(()=>s[6]||(s[6]=[b("div",{class:"text-h6 mx-auto font-weight-bold text-center text-truncate"}," 已回報問題 ",-1)])),_:1},8,["modelValue"])],64))}}),pt={key:0,class:"ml-2 d-flex align-center"},ft=T({__name:"FooterComponent",setup(p){const l=W(),a=g(!0),r=A({get(){return m.global.current.value.dark},set(c){y(c)}}),u=A({get(){return l.copyMode},set(c){l.copyMode=c,localStorage.setItem("copyURLMode",c.toString())}}),m=Be();function y(c){m.global.name.value=c?"dark":"light",localStorage.setItem("darkTheme",m.global.name.value)}const i=()=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("firefox"),s=()=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("mobile"),n=()=>!(i()&&s());return le(()=>{a.value=n(),a.value?localStorage.getItem("copyURLMode")?l.copyMode=localStorage.getItem("copyURLMode")==="true":l.copyMode=!1:l.copyMode=!0,localStorage.getItem("darkTheme")?m.global.name.value=localStorage.getItem("darkTheme")??"dark":window.matchMedia("(prefers-color-scheme: light)").matches&&(m.global.name.value="light")}),(c,o)=>{const C=Me;return k(),_(Ye,{app:""},{default:t(()=>[e(ke,{fluid:"",style:{padding:"5px"}},{default:t(()=>[e(Y,null,{default:t(()=>[e(j,null,{default:t(()=>[e(S,{variant:"text",size:"small",class:"text-center"},{default:t(()=>[o[7]||(o[7]=V(" 其他連結 ")),e(qe,{activator:"parent",location:"center"},{default:t(()=>[e(Qe,null,{default:t(()=>[e(te,{icon:`mdiSvg:${v(P)}`},null,8,["icon"]),(k(),_(O,{key:0,target:"_blank",value:0,"append-icon":v(P),href:"https://github.com/NightFeather0615/Its-MyPic-Android"},{default:t(()=>[e(B,null,{default:t(()=>o[2]||(o[2]=[V("Its-MyPic for Android")])),_:1})]),_:1},8,["append-icon"])),(k(),_(O,{key:1,target:"_blank",value:1,"append-icon":v(P),href:"https://github.com/Its-MyPic/PowerToys-Run-Its-MyPic"},{default:t(()=>[e(B,null,{default:t(()=>o[3]||(o[3]=[V("PowerToys-Run Plugin")])),_:1})]),_:1},8,["append-icon"])),(k(),_(O,{key:2,target:"_blank",value:2,"append-icon":v(P),href:"https://github.com/Its-MyPic/krunner-Its-MyPic"},{default:t(()=>[e(B,null,{default:t(()=>o[4]||(o[4]=[V("Krunner Plugin")])),_:1})]),_:1},8,["append-icon"])),(k(),_(O,{key:3,target:"_blank",value:3,"append-icon":v(P),href:"https://github.com/Its-MyPic/Its-MyPic-vue"},{default:t(()=>[e(B,null,{default:t(()=>o[5]||(o[5]=[V("這個網頁的原始碼")])),_:1})]),_:1},8,["append-icon"])),(k(),_(O,{key:4,target:"_blank",value:4,"append-icon":v(P),href:"https://github.com/Its-MyPic/Its-MyPicDB"},{default:t(()=>[e(B,null,{default:t(()=>o[6]||(o[6]=[V("mygo系列的截圖資料")])),_:1})]),_:1},8,["append-icon"]))]),_:1})]),_:1})]),_:1}),e(S,{variant:"text",size:"small",class:"text-center"},{default:t(()=>[o[8]||(o[8]=V(" 回報問題 ")),e(C)]),_:1}),e(S,{variant:"text",size:"small",class:"text-center",href:"https://forms.gle/WzW9PZwUU6gqHZko7",target:"_blank"},{default:t(()=>o[9]||(o[9]=[V(" 投稿 ")])),_:1})]),_:1}),e(j,{cols:"1"},{default:t(()=>[e(S,{variant:"text",size:"small",density:"comfortable",icon:v(we)},{default:t(()=>[e(te,{icon:v(we),"aria-label":"設定"},null,8,["icon"]),e(Q,{activator:"parent","max-width":"600px",style:{maxHeight:"90vh",minHeight:"200px"}},{default:t(()=>[e(z,{class:"d-flex flex-column align-center justify-center font-weight-bold"},{default:t(()=>[o[14]||(o[14]=b("br",null,null,-1)),o[15]||(o[15]=b("span",{class:"ml-2 d-flex align-center"},"主題",-1)),e(j,{cols:"auto",class:"d-flex align-center"},{default:t(()=>[o[10]||(o[10]=b("span",{class:"mr-2 d-flex align-center"},"淺色",-1)),e(ve,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=M=>r.value=M),class:"mx-2 d-flex align-center"},null,8,["modelValue"]),o[11]||(o[11]=b("span",{class:"ml-2 d-flex align-center"},"深色",-1))]),_:1}),o[16]||(o[16]=b("br",null,null,-1)),o[17]||(o[17]=b("span",{class:"ml-2 d-flex align-center"},"偏好複製模式",-1)),e(j,{cols:"auto",class:"d-flex align-center"},{default:t(()=>[o[12]||(o[12]=b("span",{class:"mr-2 d-flex align-center"},"複製圖片",-1)),e(ve,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=M=>u.value=M),class:"mx-2 d-flex align-center",disabled:!a.value},null,8,["modelValue","disabled"]),o[13]||(o[13]=b("span",{class:"ml-2 d-flex align-center"},"複製連結",-1))]),_:1}),a.value?ie("",!0):(k(),q("span",pt,"您的瀏覽器不支援複製圖片")),o[18]||(o[18]=b("br",null,null,-1))]),_:1})]),_:1})]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),vt={class:"text-h6 mx-auto font-weight-bold text-center text-truncate"},gt="https://mypic.0m0.uk/images/",wt=T({__name:"GifDialog",props:{text:{},season:{},episode:{},frameStart:{},frameEnd:{}},setup(p,{expose:l}){const a=new rt;let r=!1;const u=p,m=g(!1),y=g(!1),i=g(""),s=g(!1),n=g(!1),c=g(!1),o=g(""),C=g(null),M=g(null);async function ne(){r||(await a.load(),r=!0)}async function H(){if(!C.value)return;const w=document.createElement("a");w.href=URL.createObjectURL(C.value),w.download=`${u.text}.gif`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(w.href)}async function J(){const w=new File([C.value],"download.gif",{type:"image/gif"}),d=new FormData;d.append("fileToUpload",w),d.append("reqtype","fileupload");const x=await fetch("https://cors.0m0.uk/?https://catbox.moe/user/api.php",{method:"POST",body:d});if(x.status===413)throw new Error("GIF檔案過大，請自行下載後上傳至其他圖床");return await x.text()}async function G(){if(!C.value)return;c.value=!0;const w=new ClipboardItem({"text/plain":(async()=>{try{if(M.value)return new Blob([M.value],{type:"text/plain"});i.value="正在上傳GIF...",y.value=!0;const d=await J();return M.value=d,new Blob([d],{type:"text/plain"})}catch(d){throw i.value=d instanceof Error?d.message:"GIF 上傳失敗",I(d),d}})()});try{await navigator.clipboard.write([w]),i.value="GIF 連結複製成功"}catch(d){d instanceof Error&&d.name==="NotAllowedError"?i.value="GIF 連結複製失敗":i.value=d instanceof Error?d.message:"GIF 上傳失敗",I(d)}finally{y.value=!0,c.value=!1}}async function N(){if(s.value)return;if(C.value){m.value=!0;return}M.value=null,s.value=!0,i.value="GIF生成中...",y.value=!0;const w=performance.now(),d=Array.from({length:u.frameEnd-u.frameStart-4},(x,F)=>u.frameStart+F+2);try{await ne();const x=d.map(async L=>{const K=`${gt}${u.season}/${u.episode}/${L}.webp`,X=await st(K);await a.writeFile(`${L}.webp`,X)});await Promise.all(x),await a.exec(["-start_number",d[0].toString(),"-i","%d.webp","-vf","palettegen","palette.png"]),await a.exec(["-start_number",d[0].toString(),"-i","%d.webp","-i","palette.png","-filter_complex","paletteuse=dither=none","-frames:v",d.length.toString(),"-f","gif","-framerate","24","output.gif"]);const F=await a.readFile("output.gif");C.value=new Blob([F],{type:"image/gif"}),o.value=URL.createObjectURL(C.value);const Z=((performance.now()-w)/1e3).toFixed(1);i.value=`GIF生成完成 (${Z}秒)`,m.value=!0}catch(x){console.error("GIF generation failed:",x),I(x),i.value="GIF生成失敗"}finally{s.value=!1,y.value=!0;const x=d.map(F=>a.deleteFile(`${F}.webp`).catch(console.error));await Promise.all([...x,a.deleteFile("output.gif").catch(console.error),a.deleteFile("palette.png").catch(console.error)])}}async function I(w){const d={content:`Copy failed: ${w.name}

${navigator.userAgent}

${w.message}

${w.stack}`};try{await fetch(`https://discord.com/api/webhooks/${atob(ae.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})}catch(x){console.error("Failed to send error report to Discord:",x)}}return l({CreateGif:N}),(w,d)=>(k(),q(ce,null,[e(Q,{modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=x=>m.value=x),"max-width":"600px",style:{maxHeight:"90vh"}},{default:t(()=>[e(z,null,{default:t(()=>[e(Se,{src:o.value,style:{maxHeight:"70vh",objectFit:"contain"}},null,8,["src"]),e(oe,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(S,{onClick:H,loading:n.value},{default:t(()=>d[2]||(d[2]=[V("下載")])),_:1},8,["loading"]),e(S,{onClick:G,loading:c.value},{default:t(()=>d[3]||(d[3]=[V("生成連結")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{modelValue:y.value,"onUpdate:modelValue":d[1]||(d[1]=x=>y.value=x),timeout:2e3,class:"text-center",rounded:"pill"},{default:t(()=>[b("div",vt,D(i.value),1)]),_:1},8,["modelValue"])],64))}}),yt={style:{position:"relative"},class:"size"},ht=["src","alt"],bt={style:{position:"relative"}},xt={class:"text-h6 mx-auto font-weight-bold text-center text-truncate"},Vt="https://mypic.0m0.uk/images/",kt=T({__name:"CardComponent",props:{styles:{type:Object,required:!0},cardData:{type:Object,required:!0}},setup(p){const l=W(),a=g(null),r=p,u=r.cardData.text,m=r.cardData.season,y=r.cardData.episode,i=r.cardData.frameStart,s=r.cardData.framePrefer,n=m==E.AVE_MUJICA?ye[E.AVE_MUJICA]:ye[E.MYGO],c=`${n} 第${y}話`,o=`${y}`,C=ae.videoLink[n][o],M=Math.round((r.cardData.frameStart+(m==E.MYGO?lt[y]:0))/he),ne=`${C}&t=${M}s`,H=i/he,J=`${Math.floor(H/60)}:${("0"+Math.floor(H%60)).slice(-2)}`,G=A(()=>`${Vt}${m}/${y}/${s}.webp`),N=g(!1),I=g(!1),w=g("連結複製成功"),d=g(!1),x=g(!1),F=g(!1);async function pe(){if(!d.value){d.value=!0,w.value="下載中...",I.value=!0;try{const h=await fe(),U=await(await fetch(h)).blob(),$=URL.createObjectURL(U),R=document.createElement("a");R.href=$,R.download=`${u}.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL($),w.value="下載完成"}catch(h){se(h),w.value="下載失敗"}finally{d.value=!1,I.value=!0}}}var Z=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);let L=!1;const K=async h=>{if(L&&!h){L=!1;return}if(h&&(L=!0,Z)){w.value="因瀏覽器限制，不支援長按複製連結",I.value=!0;return}if(x.value)return;x.value=!0,I.value=!1;const f=h||l.copyMode;try{f?await X():await Ue()}catch(U){if(se(U),Z)w.value="複製失敗，請稍後重試，或切換為複製連結";else try{await X(),w.value="複製圖片失敗，已複製連結"}catch($){console.error("Error during copy:",$.message),w.value="失敗 請按左下角回報手機型號/瀏覽器",se($)}}finally{x.value=!1,I.value=!0}},X=async()=>{await navigator.clipboard.writeText(G.value),w.value="連結複製成功"},Ue=async()=>{const h=new ClipboardItem({"image/png":(async()=>{const f=await fe();return await(await fetch(f)).blob()})()});await navigator.clipboard.write([h]),w.value="圖片複製成功"},Re=(()=>{const h=document.createElement("canvas"),f=h.getContext("2d",{alpha:!1,willReadFrequently:!0})??new CanvasRenderingContext2D;return{canvas:h,ctx:f}})();var ee="";async function fe(){if(ee)return ee;let h=new Image;h.src=G.value,h.crossOrigin="Anonymous",h.style.display="none",await new Promise($=>{h.onload=$});const{canvas:f,ctx:U}=Re;return f.width=h.width,f.height=h.height,U.drawImage(h,0,0),ee=f.toDataURL("image/png"),ee}async function se(h){const f={content:`Copy failed: ${h.name}

${navigator.userAgent}

${h.message}

${h.stack}`};try{await fetch(`https://discord.com/api/webhooks/${atob(ae.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})}catch(U){console.error("Failed to send error report to Discord:",U)}}return(h,f)=>{const U=Me,$=Te("long-press");return k(),q("div",{style:Ve(p.styles)},[e(z,{class:"card size",color:"surface-variant",rounded:"lg",variant:"tonal",onClick:f[0]||(f[0]=R=>N.value=!0)},{default:t(()=>[b("div",yt,[b("img",{src:G.value,class:"size",alt:v(u)},null,8,ht),b("div",{style:{position:"absolute",top:"0",right:"0",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 5px"}},D(c)+" "+D(J))]),e(ue,{class:"card-text text-center justify-center"},{default:t(()=>[V(D(v(u)),1)]),_:1})]),_:1}),e(Q,{modelValue:N.value,"onUpdate:modelValue":f[3]||(f[3]=R=>N.value=R),"max-width":"600px",style:{maxHeight:"90vh"}},{default:t(()=>[e(z,null,{default:t(()=>[b("div",bt,[e(Se,{src:G.value,style:{maxHeight:"70vh",objectFit:"contain"}},null,8,["src"]),b("div",{style:{position:"absolute",top:"0",right:"0",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 5px"}},D(c)+" "+D(J))]),e(Y,null,{default:t(()=>[e(j,null,{default:t(()=>[e(ue,{class:"text-center"},{default:t(()=>[V(D(v(u)),1)]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(S,null,{default:t(()=>[f[5]||(f[5]=V(" 回報 ")),e(U,{fileName:G.value,text:v(u)},null,8,["fileName","text"])]),_:1}),e(S,{onClick:pe,loading:d.value},{default:t(()=>f[6]||(f[6]=[V("下載")])),_:1},8,["loading"]),e(S,{onClick:f[1]||(f[1]=async()=>{if(a.value){F.value=!0;try{await a.value.CreateGif()}finally{F.value=!1}}}),loading:F.value},{default:t(()=>f[7]||(f[7]=[V("GIF")])),_:1},8,["loading"]),Ee((k(),_(S,{onClick:f[2]||(f[2]=()=>K(!1)),loading:x.value},{default:t(()=>f[8]||(f[8]=[V("複製")])),_:1},8,["loading"])),[[$,()=>K(!0)]]),e(S,{href:ne,target:"_blank"},{default:t(()=>f[9]||(f[9]=[V(" 從這裡開始看 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(wt,{ref_key:"gifDialogRef",ref:a,text:v(u),season:v(m),episode:v(y),"frame-start":v(i),"frame-end":r.cardData.frameEnd},null,8,["text","season","episode","frame-start","frame-end"]),e(me,{modelValue:I.value,"onUpdate:modelValue":f[4]||(f[4]=R=>I.value=R),timeout:2e3,class:"text-center",rounded:"pill"},{default:t(()=>[b("div",xt,D(w.value),1)]),_:1},8,["modelValue"])],4)}}}),Fe=(p,l)=>{const a=p.__vccOpts||p;for(const[r,u]of l)a[r]=u;return a},St=Fe(kt,[["__scopeId","data-v-c4dc47b9"]]),_t=T({__name:"ResultGrid",setup(p){const l=dt(),a=W(),{filteredCards:r}=nt(l);le(async()=>{m(),window.addEventListener("resize",m)});let u=g(4);const m=()=>{u.value=(1+Math.floor((window.innerWidth-320)/310))*8},y=A(()=>{typeof window<"u"&&window.scrollTo({top:0,left:0,behavior:"smooth"});const s=r.value;return a.isReversed,(n,c)=>{const o=s.slice(n*c,(n+1)*c);return Promise.resolve(o)}}),i=s=>{var n;return(n=s.value)==null?void 0:n.segmentId};return Ge(()=>{window.removeEventListener("resize",m)}),(s,n)=>(k(),_(Ae,null,{default:t(()=>[e(v(it),{length:v(r).length?v(r).length:1,pageSize:v(u),pageProvider:y.value,"get-key":i,"page-provider-debounce-time":100,class:"grid ma-5"},{placeholder:t(({index:c,style:o})=>[b("div",{class:"item",style:Ve(o)},D(v(r).length?"還在GO...":""),5)]),default:t(({item:c,style:o,index:C})=>[e(St,{styles:o,cardData:c},null,8,["styles","cardData"])]),_:1},8,["length","pageSize","pageProvider"])]),fallback:t(()=>n[0]||(n[0]=[b("p",null,"Loading...",-1)])),_:1}))}}),Ct=Fe(_t,[["__scopeId","data-v-6bc8c805"]]),xe=T({__name:"MultiSelect",props:Le({items:{type:Array,required:!0},label:{type:String,required:!1,default:"Select"}},{modelValue:{type:Array,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const l=p,a=Pe(p,"modelValue"),r=A(()=>a.value.length===l.items.length),u=A(()=>a.value.length>0&&a.value.length<l.items.length),m=()=>{r.value?a.value=[]:a.value=[...l.items]};return Oe(a,()=>{a.value.sort()}),(y,i)=>(k(),_(Je,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value=s),label:p.label,variant:"outlined",multiple:"",items:p.items,style:{"min-width":"250px"}},{"prepend-item":t(()=>[e(O,{title:"全選",onClick:m},{prepend:t(()=>[e(We,{indeterminate:u.value,"model-value":r.value},null,8,["indeterminate","model-value"])]),_:1}),e(He,{class:"mt-2"})]),selection:t(({item:s,index:n})=>[a.value.length!=p.items.length?(k(),_(ge,{key:0},{default:t(()=>[b("span",null,D(s.value),1)]),_:2},1024)):ie("",!0),n===p.items.length-1?(k(),_(ge,{key:1},{default:t(()=>i[1]||(i[1]=[b("span",null,"全選",-1)])),_:1})):ie("",!0)]),_:1},8,["modelValue","label","items"]))}}),It=T({__name:"FilterDialog",setup(p){const l=_e(),a=g(!1),r=g([]),u=g([]),m=g([]),y=()=>{u.value=[],m.value=[],r.value=[]},i=()=>{l.mygoEpisodes=u.value,l.avemujicaEpisodes=m.value,l.characterId=0,a.value=!1};return le(()=>{u.value=l.mygoEpisodes,m.value=l.avemujicaEpisodes}),(s,n)=>(k(),_(Q,{modelValue:a.value,"onUpdate:modelValue":n[2]||(n[2]=c=>a.value=c),"max-width":"600px",style:{"min-height":"600px"},transition:"dialog-top-transition"},{activator:t(({props:c})=>[e(te,je(c,{icon:v(Ke)}),null,16,["icon"])]),default:t(()=>[e(z,{class:"d-flex flex-column align-center justify-center font-weight-bold"},{default:t(()=>[n[3]||(n[3]=b("br",null,null,-1)),n[4]||(n[4]=b("br",null,null,-1)),n[5]||(n[5]=b("span",{class:"align-center"},"集數篩選",-1)),e(xe,{items:v(be)[v(E).MYGO],modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=c=>u.value=c),label:"MyGO",style:{"min-width":"250px"}},null,8,["items","modelValue"]),e(xe,{items:v(be)[v(E).AVE_MUJICA],modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=c=>m.value=c),label:"Ave Mujica",style:{"min-width":"250px"}},null,8,["items","modelValue"]),e(oe,null,{default:t(()=>[e(S,{class:"text-center",text:"清除篩選",onClick:y}),e(S,{class:"text-center",text:"確定",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Mt=T({__name:"AppBarComponent",setup(p){const l=W(),a=Ce(),r=g(""),u=ot(()=>{a.query=r.value},500),m=()=>{a.query=r.value},y=()=>{r.value="",a.query=""};return le(()=>{const s=new URLSearchParams(window.location.search).get("q");s&&(r.value=s,a.query=s)}),(i,s)=>{const n=It;return k(),_(Ze,{density:"prominent"},{default:t(()=>[e(ke,null,{default:t(()=>[s[1]||(s[1]=b("div",{class:"text-h5 mx-auto font-weight-bold text-center text-truncate"}," MyGO Mujica 截圖搜尋器 ",-1)),e(Y,{dense:"",class:"mt-2"},{default:t(()=>[e(j,{class:"text-center"},{default:t(()=>[e(de,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),"single-line":"","hide-details":"",clearable:"",label:"搜尋",variant:"outlined",class:"short-search",onKeyup:ze(m,["enter"]),"onClick:clear":y,onInput:v(u),autofocus:""},{append:t(()=>[e(te,{onClick:v(l).toggleReverse,icon:v(l).isReversed?v(Xe):v(et)},null,8,["onClick","icon"])]),"append-inner":t(()=>[e(n)]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Yt=T({__name:"index",setup(p){return(l,a)=>{const r=Mt,u=Ct,m=ft;return k(),q(ce,null,[e(r),e(u),e(m,{style:{width:"100%"}})],64)}}});export{Yt as default};
