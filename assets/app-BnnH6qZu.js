const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DKFowt-b.js","assets/@vue-D9bH4lrz.js","assets/vuetify-LsV7B-xS.js","assets/vuetify-B4_NCUnQ.css","assets/@mdi-DKC2W5MC.js","assets/pinia-B-uPeou1.js","assets/@ffmpeg-B1ncfXmI.js","assets/vue-virtual-scroll-grid-DSIWnnUt.js","assets/vite-ssg-CQCaBNHx.js","assets/vue-router-Y811DZoV.js","assets/@unhead-DsvcCsHo.js","assets/unhead-CpyiRjm1.js","assets/hookable-B7_1qfUG.js","assets/protobufjs-CgPuVhCO.js","assets/@protobufjs-f4nnaicZ.js","assets/opencc-js-D2OnpAg6.js","assets/index-BlgHL4qe.css"])))=>i.map(i=>d[i]);
var k=Object.defineProperty;var L=(o,n,r)=>n in o?k(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r;var O=(o,n,r)=>L(o,typeof n!="symbol"?n+"":n,r);import{V as C}from"./vite-ssg-CQCaBNHx.js";import{d as S,c as U}from"./pinia-B-uPeou1.js";import{m}from"./protobufjs-CgPuVhCO.js";import{r as p,U as P,c as b,w as x,k as M,l as j,E as N,a6 as R,D as V,F as v,X as E}from"./@vue-D9bH4lrz.js";import{C as J,f as _}from"./opencc-js-D2OnpAg6.js";import{V as q,a as B,c as $,m as G,b as Y,d as W}from"./vuetify-LsV7B-xS.js";import"./vue-router-Y811DZoV.js";import"./@unhead-DsvcCsHo.js";import"./unhead-CpyiRjm1.js";import"./hookable-B7_1qfUG.js";import"./@protobufjs-f4nnaicZ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();const u=m.Reader,I=m.Writer,d=m.util,c=m.roots.default||(m.roots.default={}),z=c.data=(()=>{const o={};return o.Info=function(){function n(r){if(r)for(let e=Object.keys(r),t=0;t<e.length;++t)r[e[t]]!=null&&(this[e[t]]=r[e[t]])}return n.prototype.text="",n.prototype.season=0,n.prototype.episode=0,n.prototype.frameStart=0,n.prototype.framePrefer=0,n.prototype.frameEnd=0,n.prototype.segmentId=0,n.create=function(e){return new n(e)},n.encode=function(e,t){return t||(t=I.create()),e.text!=null&&Object.hasOwnProperty.call(e,"text")&&t.uint32(10).string(e.text),e.season!=null&&Object.hasOwnProperty.call(e,"season")&&t.uint32(16).int32(e.season),e.episode!=null&&Object.hasOwnProperty.call(e,"episode")&&t.uint32(24).int32(e.episode),e.frameStart!=null&&Object.hasOwnProperty.call(e,"frameStart")&&t.uint32(32).int32(e.frameStart),e.framePrefer!=null&&Object.hasOwnProperty.call(e,"framePrefer")&&t.uint32(40).int32(e.framePrefer),e.frameEnd!=null&&Object.hasOwnProperty.call(e,"frameEnd")&&t.uint32(48).int32(e.frameEnd),e.segmentId!=null&&Object.hasOwnProperty.call(e,"segmentId")&&t.uint32(56).int32(e.segmentId),t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof u||(e=u.create(e));let i=t===void 0?e.len:e.pos+t,a=new c.data.Info;for(;e.pos<i;){let s=e.uint32();switch(s>>>3){case 1:{a.text=e.string();break}case 2:{a.season=e.int32();break}case 3:{a.episode=e.int32();break}case 4:{a.frameStart=e.int32();break}case 5:{a.framePrefer=e.int32();break}case 6:{a.frameEnd=e.int32();break}case 7:{a.segmentId=e.int32();break}default:e.skipType(s&7);break}}return a},n.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},n.verify=function(e){return typeof e!="object"||e===null?"object expected":e.text!=null&&e.hasOwnProperty("text")&&!d.isString(e.text)?"text: string expected":e.season!=null&&e.hasOwnProperty("season")&&!d.isInteger(e.season)?"season: integer expected":e.episode!=null&&e.hasOwnProperty("episode")&&!d.isInteger(e.episode)?"episode: integer expected":e.frameStart!=null&&e.hasOwnProperty("frameStart")&&!d.isInteger(e.frameStart)?"frameStart: integer expected":e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&!d.isInteger(e.framePrefer)?"framePrefer: integer expected":e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&!d.isInteger(e.frameEnd)?"frameEnd: integer expected":e.segmentId!=null&&e.hasOwnProperty("segmentId")&&!d.isInteger(e.segmentId)?"segmentId: integer expected":null},n.fromObject=function(e){if(e instanceof c.data.Info)return e;let t=new c.data.Info;return e.text!=null&&(t.text=String(e.text)),e.season!=null&&(t.season=e.season|0),e.episode!=null&&(t.episode=e.episode|0),e.frameStart!=null&&(t.frameStart=e.frameStart|0),e.framePrefer!=null&&(t.framePrefer=e.framePrefer|0),e.frameEnd!=null&&(t.frameEnd=e.frameEnd|0),e.segmentId!=null&&(t.segmentId=e.segmentId|0),t},n.toObject=function(e,t){t||(t={});let i={};return t.defaults&&(i.text="",i.season=0,i.episode=0,i.frameStart=0,i.framePrefer=0,i.frameEnd=0,i.segmentId=0),e.text!=null&&e.hasOwnProperty("text")&&(i.text=e.text),e.season!=null&&e.hasOwnProperty("season")&&(i.season=e.season),e.episode!=null&&e.hasOwnProperty("episode")&&(i.episode=e.episode),e.frameStart!=null&&e.hasOwnProperty("frameStart")&&(i.frameStart=e.frameStart),e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&(i.framePrefer=e.framePrefer),e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&(i.frameEnd=e.frameEnd),e.segmentId!=null&&e.hasOwnProperty("segmentId")&&(i.segmentId=e.segmentId),i},n.prototype.toJSON=function(){return this.constructor.toObject(this,m.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Info"},n}(),o.Data=function(){function n(r){if(this.info=[],r)for(let e=Object.keys(r),t=0;t<e.length;++t)r[e[t]]!=null&&(this[e[t]]=r[e[t]])}return n.prototype.info=d.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=I.create()),e.info!=null&&e.info.length)for(let i=0;i<e.info.length;++i)c.data.Info.encode(e.info[i],t.uint32(10).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof u||(e=u.create(e));let i=t===void 0?e.len:e.pos+t,a=new c.data.Data;for(;e.pos<i;){let s=e.uint32();switch(s>>>3){case 1:{a.info&&a.info.length||(a.info=[]),a.info.push(c.data.Info.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}return a},n.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.info!=null&&e.hasOwnProperty("info")){if(!Array.isArray(e.info))return"info: array expected";for(let t=0;t<e.info.length;++t){let i=c.data.Info.verify(e.info[t]);if(i)return"info."+i}}return null},n.fromObject=function(e){if(e instanceof c.data.Data)return e;let t=new c.data.Data;if(e.info){if(!Array.isArray(e.info))throw TypeError(".data.Data.info: array expected");t.info=[];for(let i=0;i<e.info.length;++i){if(typeof e.info[i]!="object")throw TypeError(".data.Data.info: object expected");t.info[i]=c.data.Info.fromObject(e.info[i])}}return t},n.toObject=function(e,t){t||(t={});let i={};if((t.arrays||t.defaults)&&(i.info=[]),e.info&&e.info.length){i.info=[];for(let a=0;a<e.info.length;++a)i.info[a]=c.data.Info.toObject(e.info[a],t)}return i},n.prototype.toJSON=function(){return this.constructor.toObject(this,m.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Data"},n}(),o})();var w=(o=>(o[o.MYGO=1]="MYGO",o[o.AVE_MUJICA=2]="AVE_MUJICA",o))(w||{});const Ie={1:"MyGO",2:"Ave Mujica"},g={1:Array.from({length:13},(o,n)=>n+1),2:Array.from({length:12},(o,n)=>n+1)},ge=23.976,Fe=[0,0,0,34288,68333,0,0,0,0,0,0,0,0,0];function Q(o){const n={text:o.text||"",season:o.season||0,episode:o.episode||0,segmentId:o.segmentId||0,frame:{start:o.frameStart||0,prefer:o.framePrefer||0,end:o.frameEnd||0}};return{...n,toJSON(){return{...n,frame:{...n.frame}}}}}const K=S("data",()=>{const o=p([]),n=p(!1),r=p(null),e=async()=>{if(!(o.value.length>0)){n.value=!0,r.value=null;try{const i=await(await fetch("/data/data.bin")).arrayBuffer(),a=z.Data.decode(new Uint8Array(i));o.value=a.info.map(s=>Q(s))}catch(t){r.value=t instanceof Error?t:new Error("Failed to fetch cards"),o.value=[]}finally{n.value=!1}}};return{cards:P(o),isLoading:P(n),error:P(r),fetchCards:e}});function T(o,n){let r;return function(...e){clearTimeout(r),r=setTimeout(()=>o(...e),n)}}const X=S("filter",()=>{const o=p([]),n=p([]),r=p(0),e=b(()=>({mygo:new Set(o.value),avemujica:new Set(n.value),character:r.value})),t=()=>{const a=new URL(window.location.href);let s=0;o.value.forEach(l=>{s|=1<<l-1}),n.value.forEach(l=>{s|=1<<l+12}),s===0?a.searchParams.delete("ep"):a.searchParams.set("ep",s.toString()),window.history.pushState({},"",a.toString())},i=()=>{const s=new URLSearchParams(window.location.search).get("ep");if(s){const l=parseInt(s),h=g[w.MYGO].filter(f=>(l&1<<f-1)!==0),y=g[w.AVE_MUJICA].filter(f=>(l&1<<f+12)!==0);o.value=h,n.value=y}};return x([o,n],T(()=>t(),300)),{mygoEpisodes:o,avemujicaEpisodes:n,characterId:r,activeFilters:e,initFromUrl:i}}),H=[["你","妳"],["啊","阿"]],Z=J(_.cn,_.tw.concat([H]));function ee(o){return Z(o.trim()).toLowerCase()}const te=S("search",()=>{const o=p(""),n=b(()=>o.value?ee(o.value):""),r=()=>{const t=new URL(window.location.href);o.value===""?t.searchParams.delete("q"):t.searchParams.set("q",o.value),window.history.pushState({},"",t.toString())},e=()=>{const i=new URLSearchParams(window.location.search).get("q");i&&(o.value=i)};return x(o,T(()=>r(),300)),{query:o,normalizedQuery:n,initFromUrl:e}}),ne=M({__name:"App",setup(o){const n=K(),r=X(),e=te();return j(async()=>{r.initFromUrl(),e.initFromUrl(),await n.fetchCards()}),(t,i)=>{const a=R("router-view");return V(),N(B,null,{default:v(()=>[E(q,null,{default:v(()=>[E(a)]),_:1})]),_:1})}}});class re{constructor(n,r,e=1300){O(this,"element");this.element=n,this.element._longPressCallBack=r,this.element._longPressStart=this.start,this.element._longPressStop=this.stop,this.element._longPressMove=this.move,this.element._longPressDelay=e,this.element._longPressDestroy=this.destroy(this.element),this.element._longPressIsStart=!1,this.element._longPressTimer=null,this.element.addEventListener("pointerdown",this.element._longPressStart),this.element.addEventListener("pointerup",this.element._longPressStop),this.element.addEventListener("pointermove",this.element._longPressMove)}start(n){const r=this;r._longPressTimer===null&&!r._longPressIsStart&&(r._longPressIsStart=!0,r._longPressTimer=window.setTimeout(()=>{r._longPressCallBack(n),r._longPressStop(n)},r._longPressDelay))}stop(){const n=this;n._longPressTimer&&clearTimeout(n._longPressTimer),n._longPressTimer=null,n._longPressIsStart=!1}move(n){const r=this;r._longPressIsStart&&(r._longPressTimer&&clearTimeout(r._longPressTimer),r._longPressTimer=window.setTimeout(()=>{r._longPressCallBack(n),r._longPressStop(n)},r._longPressDelay))}destroy(n){return()=>{n.removeEventListener("pointerdown",this.start),n.removeEventListener("pinterup",this.stop),n.removeEventListener("pointermove",this.move)}}}function oe(o,n){new re(o,n.value,150)}function ie(o){o._longPressDestroy()}const ae={mounted:oe,beforeUnmount:ie},se=$({blueprint:G,icons:{defaultSet:"mdi",aliases:Y,sets:{mdi:W}},theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}}),le="modulepreload",fe=function(o){return"/"+o},F={},ce=function(n,r,e){let t=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));t=Promise.allSettled(r.map(l=>{if(l=fe(l),l in F)return;F[l]=!0;const h=l.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${y}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":le,h||(f.as="script"),f.crossOrigin="",f.href=l,s&&f.setAttribute("nonce",s),document.head.appendChild(f),h)return new Promise((D,A)=>{f.addEventListener("load",D),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return t.then(a=>{for(const s of a||[])s.status==="rejected"&&i(s.reason);return n().catch(i)})},ue=[{path:"/",name:"/",component:()=>ce(()=>import("./index-DKFowt-b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))}];C(ne,{routes:ue},o=>{o.app.use(se),o.app.use(U()),o.app.directive("longPress",ae)});export{g as E,ge as F,Fe as M,w as S,X as a,te as b,Ie as c,T as d,ee as n,K as u};
