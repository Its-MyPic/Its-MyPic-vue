import{k as C,r as w,D as y,I as O,X as e,F as t,a4 as h,a6 as v,J as ie,w as L,c as R,l as E,E as x,u as f,a7 as W,a1 as he,a8 as M,B as be,L as de,O as xe,a9 as Ve,aa as ke,ab as _e,Y as Me,ac as Ce}from"./@vue-CHN43AaJ.js";import{e as j,f as Se,g as H,h as Z,i as J,j as _,k as B,l as ce,u as Ie,n as Re,o as q,p as F,q as Ue,r as Te,s as N,t as P,v as $,w as oe,x as me,y as De,z as Pe,A as Fe,B as ne,C as $e,D as Le}from"./vuetify-tJbY8IFE.js";import{m as D,a as se,b as je,c as ze,d as Ae}from"./@mdi-DKC2W5MC.js";import{d as Q,s as qe}from"./pinia--JlMAxTN.js";import{C as Ne,t as Oe,c as Ee}from"./opencc-js-D-mJJ3do.js";import{G as Be}from"./vue-virtual-scroll-grid-BqEqVLwx.js";const Qe="MTMzNTEwMzQ1NzY4MTczNTc2MC9LT0lwZ2FDc3RmRURnVHVqR2dEYmVYWWZSLUdZRjVQQ29veXZ0TFVGbFhFM0tYdGRGTzhHR3RrTXptWEp4R3FxQVI5bw==",Ge={MyGO:{4:"https://www.youtube.com/watch?v=ijdspfPMzYc",5:"https://www.youtube.com/watch?v=zfA0zRAkAdk",6:"https://www.youtube.com/watch?v=UwgyEoB9vU8",7:"https://www.youtube.com/watch?v=rlY2b3TIYPs",8:"https://www.youtube.com/watch?v=mfboDpl88QY",9:"https://www.youtube.com/watch?v=ySjYENzyZmY",10:"https://www.youtube.com/watch?v=bLWDIYpGcEI",11:"https://www.youtube.com/watch?v=gAFDVnhX24o",12:"https://www.youtube.com/watch?v=wei3payuSi8",13:"https://www.youtube.com/watch?v=uQ3_PvPCNnI","1-3":"https://www.youtube.com/watch?v=WOrYBIYIwyk"},"Ave Mujica":{1:"https://www.youtube.com/watch?v=dxmmSFQxWzM",2:"https://www.youtube.com/watch?v=Bzl61esi4qc",3:"https://www.youtube.com/watch?v=HagaJboujK4",4:"https://www.youtube.com/watch?v=Z6cOxtDsfNU",5:"https://www.youtube.com/watch?v=7D2uGv7aprQ",6:"https://www.youtube.com/watch?v=jQraN1emvLQ",7:"https://www.youtube.com/watch?v=RONGNWb7OpQ",8:"https://www.youtube.com/watch?v=uh9jUhVTS28",9:"https://www.youtube.com/watch?v=pGrI6hk0vBg"}},K={webhook:Qe,videoLink:Ge},pe=C({__name:"ReportDialog",props:{fileName:{type:String,required:!1,default:""},text:{type:String,required:!1,default:""}},setup(c){const i=c,o=w(""),d=w(""),s=w(!1),m=w(!1);async function g(){let n="";if(o.value&&(n+=`問題: ${o.value}
`),d.value&&(n+=`聯絡方式: ${d.value}
`),i.fileName&&(n+=`檔案名稱: ${i.fileName}
`),i.text&&(n+=`文字: ${i.text}
`),n){const r={content:n};await fetch(`https://discord.com/api/webhooks/${atob(K.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s.value=!0}m.value=!1}return(n,r)=>(y(),O(ie,null,[e(B,{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=l=>m.value=l),activator:"parent","max-width":"600px",style:{maxHeight:"90vh"},transition:"dialog-bottom-transition"},{default:t(()=>[e(j,null,{default:t(()=>[e(Se,null,{default:t(()=>r[4]||(r[4]=[h("回報問題")])),_:1}),e(H,null,{default:t(()=>[e(Z,{label:"你遭遇到的問題(選填)",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=l=>o.value=l),outlined:""},null,8,["modelValue"]),e(Z,{label:"你的聯絡方式(選填)",modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=l=>d.value=l),outlined:""},null,8,["modelValue"])]),_:1}),e(J,null,{default:t(()=>[e(_,{onClick:g},{default:t(()=>r[5]||(r[5]=[h("送出")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ce,{modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=l=>s.value=l),timeout:2e3,class:"text-center",rounded:"pill"},{default:t(()=>r[6]||(r[6]=[v("div",{class:"text-h6 mx-auto font-weight-bold text-center text-truncate"}," 已回報問題 ",-1)])),_:1},8,["modelValue"])],64))}}),re=c=>c.toLowerCase().replace("你","妳").replace("啊","阿"),Ye=()=>Ne(Ee,Oe),X=Q("Reverse",{state:()=>({reverse:!1})}),ve=Q("CopyMode",{state:()=>({copyMode:!1})}),ee=Q("Query",()=>{const c=w(""),i=w([]),o=w([]),d=w(0),s=()=>{const m=new URL(window.location.href);c.value===""?m.searchParams.delete("q"):m.searchParams.set("q",c.value);for(var g=0,n=1;n<14;n++)g|=+i.value.includes(n)<<n-1;for(var n=1;n<9;n++)g|=+o.value.includes(n)<<n+12;g==0?m.searchParams.delete("ep"):m.searchParams.set("ep",g.toString()),window.history.pushState({},"",m.toString())};return L(c,s),L(i,s),L(o,s),L(d,s),{query:c,mygoFilter:i,avemujicaFilter:o,characterFilter:d}}),We=Q("Data",()=>{const c=w([]),i=ee(),o=X();o.$subscribe(()=>{c.value.reverse()});const d=Ye();var s=new Map;const m=R(()=>{if(c.value.length===0)return[];var n=c.value,r=new Set;if(i.mygoFilter.forEach(l=>{l<4?r.add("1-3"):r.add(`${l}`)}),i.avemujicaFilter.forEach(l=>{r.add(`ave-${l}`)}),r.size!==0){const l=o.reverse+Array.from(r).join("");s.has(l)?n=s.get(l)??[]:(n=c.value.filter(u=>r.has(u.episode)),s.set(l,n))}if(i.query==="")return n;{const l=d(re(i.query));return n.filter(u=>re(u.text).includes(l))}});return{cardsData:c,fetchData:async()=>{if(c.value.length===0){var n;try{n=await(await fetch("/data/data.json")).json()}catch{n=[]}c.value=n,s.clear()}},filteredCards:m}}),He={key:0,class:"ml-2 d-flex align-center"},Ze=C({__name:"FooterComponent",setup(c){const i=ve(),o=w(!0),d=R({get(){return m.global.current.value.dark},set(u){g(u)}}),s=R({get(){return i.copyMode},set(u){i.copyMode=u,localStorage.setItem("copyURLMode",u.toString())}}),m=Ie();function g(u){m.global.name.value=u?"dark":"light",localStorage.setItem("darkTheme",m.global.name.value)}const n=()=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("firefox"),r=()=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("mobile"),l=()=>!(n()&&r());return E(()=>{o.value=l(),o.value?localStorage.getItem("copyURLMode")?i.copyMode=localStorage.getItem("copyURLMode")==="true":i.copyMode=!1:i.copyMode=!0,localStorage.getItem("darkTheme")?m.global.name.value=localStorage.getItem("darkTheme")??"dark":window.matchMedia("(prefers-color-scheme: light)").matches&&(m.global.name.value="light")}),(u,a)=>{const S=pe;return y(),x(Re,{app:""},{default:t(()=>[e(me,{fluid:"",style:{padding:"5px"}},{default:t(()=>[e(q,null,{default:t(()=>[e(F,null,{default:t(()=>[e(_,{variant:"text",size:"small",class:"text-center"},{default:t(()=>[a[7]||(a[7]=h(" 其他連結 ")),e(Ue,{activator:"parent",location:"center"},{default:t(()=>[e(Te,null,{default:t(()=>[e(N,{icon:`mdiSvg:${f(D)}`},null,8,["icon"]),(y(),x(P,{key:0,target:"_blank",value:0,"append-icon":f(D),href:"https://github.com/NightFeather0615/Its-MyPic-Android"},{default:t(()=>[e($,null,{default:t(()=>a[2]||(a[2]=[h("Its-MyPic for Android")])),_:1})]),_:1},8,["append-icon"])),(y(),x(P,{key:1,target:"_blank",value:1,"append-icon":f(D),href:"https://github.com/Its-MyPic/PowerToys-Run-Its-MyPic"},{default:t(()=>[e($,null,{default:t(()=>a[3]||(a[3]=[h("PowerToys-Run Plugin")])),_:1})]),_:1},8,["append-icon"])),(y(),x(P,{key:2,target:"_blank",value:2,"append-icon":f(D),href:"https://github.com/Its-MyPic/krunner-Its-MyPic"},{default:t(()=>[e($,null,{default:t(()=>a[4]||(a[4]=[h("Krunner Plugin")])),_:1})]),_:1},8,["append-icon"])),(y(),x(P,{key:3,target:"_blank",value:3,"append-icon":f(D),href:"https://github.com/Its-MyPic/Its-MyPic-vue"},{default:t(()=>[e($,null,{default:t(()=>a[5]||(a[5]=[h("這個網頁的原始碼")])),_:1})]),_:1},8,["append-icon"])),(y(),x(P,{key:4,target:"_blank",value:4,"append-icon":f(D),href:"https://github.com/Its-MyPic/Its-MyPicDB"},{default:t(()=>[e($,null,{default:t(()=>a[6]||(a[6]=[h("mygo系列的截圖資料")])),_:1})]),_:1},8,["append-icon"]))]),_:1})]),_:1})]),_:1}),e(_,{variant:"text",size:"small",class:"text-center"},{default:t(()=>[a[8]||(a[8]=h(" 回報問題 ")),e(S)]),_:1}),e(_,{variant:"text",size:"small",class:"text-center",href:"https://forms.gle/WzW9PZwUU6gqHZko7",target:"_blank"},{default:t(()=>a[9]||(a[9]=[h(" 投稿 ")])),_:1})]),_:1}),e(F,{cols:"1"},{default:t(()=>[e(_,{variant:"text",size:"small",density:"comfortable",icon:f(se)},{default:t(()=>[e(N,{icon:f(se),"aria-label":"設定"},null,8,["icon"]),e(B,{activator:"parent","max-width":"600px",style:{maxHeight:"90vh",minHeight:"200px"}},{default:t(()=>[e(j,{class:"d-flex flex-column align-center justify-center font-weight-bold"},{default:t(()=>[a[14]||(a[14]=v("br",null,null,-1)),a[15]||(a[15]=v("span",{class:"ml-2 d-flex align-center"},"主題",-1)),e(F,{cols:"auto",class:"d-flex align-center"},{default:t(()=>[a[10]||(a[10]=v("span",{class:"mr-2 d-flex align-center"},"淺色",-1)),e(oe,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=I=>d.value=I),class:"mx-2 d-flex align-center"},null,8,["modelValue"]),a[11]||(a[11]=v("span",{class:"ml-2 d-flex align-center"},"深色",-1))]),_:1}),a[16]||(a[16]=v("br",null,null,-1)),a[17]||(a[17]=v("span",{class:"ml-2 d-flex align-center"},"偏好複製模式",-1)),e(F,{cols:"auto",class:"d-flex align-center"},{default:t(()=>[a[12]||(a[12]=v("span",{class:"mr-2 d-flex align-center"},"複製圖片",-1)),e(oe,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=I=>s.value=I),class:"mx-2 d-flex align-center",disabled:!o.value},null,8,["modelValue","disabled"]),a[13]||(a[13]=v("span",{class:"ml-2 d-flex align-center"},"複製連結",-1))]),_:1}),o.value?W("",!0):(y(),O("span",He,"您的瀏覽器不支援複製圖片")),a[18]||(a[18]=v("br",null,null,-1))]),_:1})]),_:1})]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ke={style:{position:"relative"},class:"size"},Je=["src","alt"],Xe={style:{position:"relative"}},et={class:"text-h6 mx-auto font-weight-bold text-center text-truncate"},tt="https://mygodata.0m0.uk/images/",at=C({__name:"CardComponent",props:{styles:{type:Object,required:!0},cardData:{type:Object,required:!0}},setup(c){const i=ve(),o=c,d=o.cardData.text,s=o.cardData.episode,g=s.startsWith("ave")?"Ave Mujica":"MyGO",n=`${g} 第${s.replace("ave-","")}話`,r=s.replace("ave-",""),l=K.videoLink[g][r],u=o.cardData.frame_start,a=u/23.976,S=`${Math.floor(a/60)}:${("0"+Math.round(a%60)).slice(-2)}`,I=`${l}&t=${Math.round(a)}s`,U=R(()=>`${tt}${s}_${u}.jpg`),G=w(!1),z=w(!1),A=w("連結複製成功");async function ge(){const p=await(await fetch(U.value)).blob(),b=URL.createObjectURL(p),V=document.createElement("a");V.href=b,V.download=`${d}.jpg`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(b)}let Y=!1;const te=async k=>{if(Y&&!k){Y=!1;return}k&&(Y=!0),z.value=!1;const p=k||i.copyMode;try{p?await ae():await we()}catch(b){le(b);try{await ae()}catch(V){console.error("Error during copy:",V.message),A.value="失敗 請按左下角回報手機型號/瀏覽器",le(V)}}finally{z.value=!0}},ae=async()=>{await navigator.clipboard.writeText(U.value),A.value="連結複製成功"},we=async()=>{const k=new ClipboardItem({"image/png":(async()=>{let p=new Image;p.src=U.value,p.crossOrigin="Anonymous",p.style.display="none",await new Promise(ye=>{p.onload=ye});let b=document.createElement("canvas"),V=b.getContext("2d")??new CanvasRenderingContext2D;b.width=p.width,b.height=p.height,V.drawImage(p,0,0);const T=b.toDataURL("image/png");return await(await fetch(T)).blob()})()});await navigator.clipboard.write([k]),A.value="圖片複製成功"};async function le(k){const p={content:`Copy failed: ${k.name}

${navigator.userAgent}

${k.message}

${k.stack}`};try{await fetch(`https://discord.com/api/webhooks/${atob(K.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})}catch(b){console.error("Failed to send error report to Discord:",b)}}return(k,p)=>{const b=pe,V=he("long-press");return y(),O("div",{style:de(c.styles)},[e(j,{class:"card size",color:"surface-variant",rounded:"lg",variant:"tonal",onClick:p[0]||(p[0]=T=>G.value=!0)},{default:t(()=>[v("div",Ke,[v("img",{src:U.value,class:"size",alt:f(d)},null,8,Je),v("div",{style:{position:"absolute",top:"0",right:"0",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 5px"}},M(n)+" "+M(S))]),e(H,{class:"card-text text-center justify-center"},{default:t(()=>[h(M(f(d)),1)]),_:1})]),_:1}),e(B,{modelValue:G.value,"onUpdate:modelValue":p[2]||(p[2]=T=>G.value=T),"max-width":"600px",style:{maxHeight:"90vh"}},{default:t(()=>[e(j,null,{default:t(()=>[v("div",Xe,[e(De,{src:U.value,style:{maxHeight:"70vh",objectFit:"contain"}},null,8,["src"]),v("div",{style:{position:"absolute",top:"0",right:"0",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 5px"}},M(n)+" "+M(S))]),e(q,null,{default:t(()=>[e(F,null,{default:t(()=>[e(H,{class:"text-center"},{default:t(()=>[h(M(f(d)),1)]),_:1})]),_:1})]),_:1}),e(J,null,{default:t(()=>[e(q,null,{default:t(()=>[e(_,null,{default:t(()=>[p[4]||(p[4]=h(" 回報 ")),e(b,{fileName:U.value,text:f(d)},null,8,["fileName","text"])]),_:1}),e(_,{onClick:ge},{default:t(()=>p[5]||(p[5]=[h("下載")])),_:1}),be((y(),x(_,{onClick:p[1]||(p[1]=()=>te(!1))},{default:t(()=>p[6]||(p[6]=[h("複製")])),_:1})),[[V,()=>te(!0)]]),e(_,{href:I,target:"_blank"},{default:t(()=>p[7]||(p[7]=[h(" 從這裡開始看 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ce,{modelValue:z.value,"onUpdate:modelValue":p[3]||(p[3]=T=>z.value=T),timeout:2e3,class:"text-center",rounded:"pill"},{default:t(()=>[v("div",et,M(A.value),1)]),_:1},8,["modelValue"])],4)}}}),fe=(c,i)=>{const o=c.__vccOpts||c;for(const[d,s]of i)o[d]=s;return o},lt=fe(at,[["__scopeId","data-v-ddf716f8"]]),ot=C({__name:"ResultGrid",setup(c){const i=X(),o=We();o.fetchData();const{filteredCards:d}=qe(o);let s=w(4);const m=()=>{s.value=(1+Math.floor((window.innerWidth-320)/310))*8},g=R(()=>{typeof window<"u"&&window.scrollTo({top:0,left:0,behavior:"smooth"});const r=d.value;return i.reverse,(l,u)=>{const a=r.slice(l*u,(l+1)*u);return Promise.resolve(a)}}),n=r=>{var l;return(l=r.value)==null?void 0:l.segment_id};return E(()=>{m(),window.addEventListener("resize",m)}),xe(()=>{window.removeEventListener("resize",m)}),(r,l)=>(y(),x(Ve,null,{default:t(()=>[e(f(Be),{length:f(d).length?f(d).length:1,pageSize:f(s),pageProvider:g.value,"get-key":n,"page-provider-debounce-time":100,class:"grid ma-5"},{placeholder:t(({index:u,style:a})=>[v("div",{class:"item",style:de(a)},M(f(d).length?"還在GO...":""),5)]),default:t(({item:u,style:a,index:S})=>[e(lt,{styles:a,cardData:u},null,8,["styles","cardData"])]),_:1},8,["length","pageSize","pageProvider"])]),fallback:t(()=>l[0]||(l[0]=[v("p",null,"Loading...",-1)])),_:1}))}}),nt=fe(ot,[["__scopeId","data-v-d7f113b7"]]),ue=C({__name:"MultiSelect",props:ke({items:{type:Array,required:!0},label:{type:String,required:!1,default:"Select"}},{modelValue:{type:Array,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const i=c,o=_e(c,"modelValue"),d=R(()=>o.value.length===i.items.length),s=R(()=>o.value.length>0&&o.value.length<i.items.length),m=()=>{d.value?o.value=[]:o.value=[...i.items]};return L(o,()=>{o.value.sort()}),(g,n)=>(y(),x($e,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=r=>o.value=r),label:c.label,variant:"outlined",multiple:"",items:c.items,style:{"min-width":"250px"}},{"prepend-item":t(()=>[e(P,{title:"全選",onClick:m},{prepend:t(()=>[e(Pe,{indeterminate:s.value,"model-value":d.value},null,8,["indeterminate","model-value"])]),_:1}),e(Fe,{class:"mt-2"})]),selection:t(({item:r,index:l})=>[o.value.length!=c.items.length?(y(),x(ne,{key:0},{default:t(()=>[v("span",null,M(r.value),1)]),_:2},1024)):W("",!0),l===c.items.length-1?(y(),x(ne,{key:1},{default:t(()=>n[1]||(n[1]=[v("span",null,"全選",-1)])),_:1})):W("",!0)]),_:1},8,["modelValue","label","items"]))}}),st=C({__name:"FilterDialog",setup(c){const i=ee(),o=w(!1),d=w([]),s=w([]),m=w([]),g=()=>{s.value=[],m.value=[],d.value=[]},n=()=>{i.mygoFilter=s.value,i.avemujicaFilter=m.value,i.characterFilter=0,o.value=!1};return E(()=>{const l=new URLSearchParams(window.location.search).get("ep");if(l){for(var u=+l,a=0;u&&a<13;a++){const S=u&1;u=u>>1,S&&s.value.push(a+1)}for(var a=0;u&&a<13;a++){const I=u&1;u=u>>1,I&&m.value.push(a+1)}n()}}),(r,l)=>(y(),x(B,{modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=u=>o.value=u),"max-width":"600px",style:{"min-height":"600px"},transition:"dialog-top-transition"},{activator:t(({props:u})=>[e(N,Me(u,{icon:f(je)}),null,16,["icon"])]),default:t(()=>[e(j,{class:"d-flex flex-column align-center justify-center font-weight-bold"},{default:t(()=>[l[3]||(l[3]=v("br",null,null,-1)),l[4]||(l[4]=v("br",null,null,-1)),l[5]||(l[5]=v("span",{class:"align-center"},"集數篩選",-1)),e(ue,{items:Array.from({length:13},(u,a)=>a+1),modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=u=>s.value=u),label:"MyGO",style:{"min-width":"250px"}},null,8,["items","modelValue"]),e(ue,{items:Array.from({length:8},(u,a)=>a+1),modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=u=>m.value=u),label:"Ave Mujica",style:{"min-width":"250px"}},null,8,["items","modelValue"]),e(J,null,{default:t(()=>[e(_,{class:"text-center",text:"清除篩選",onClick:g}),e(_,{class:"text-center",text:"確定",onClick:n})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),rt=C({__name:"AppBarComponent",setup(c){const i=X(),o=ee(),d=w(),s=w(""),m=()=>{clearTimeout(d.value),d.value=setTimeout(g,500)},g=()=>{clearTimeout(d.value),o.query=s.value},n=()=>{s.value="",o.query=""};return E(()=>{const l=new URLSearchParams(window.location.search).get("q");l&&(s.value=l,o.query=l)}),(r,l)=>{const u=st;return y(),x(Le,{density:"prominent"},{default:t(()=>[e(me,null,{default:t(()=>[l[2]||(l[2]=v("div",{class:"text-h5 mx-auto font-weight-bold text-center text-truncate"}," MyGO Mujica 截圖搜尋器 ",-1)),e(q,{dense:"",class:"mt-2"},{default:t(()=>[e(F,{class:"text-center"},{default:t(()=>[e(Z,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),"single-line":"","hide-details":"",clearable:"",label:"搜尋",variant:"outlined",class:"short-search",onKeyup:Ce(g,["enter"]),"onClick:clear":n,onInput:m,autofocus:""},{append:t(()=>[e(N,{onClick:l[0]||(l[0]=a=>f(i).reverse=!f(i).reverse),icon:f(i).reverse?f(ze):f(Ae)},null,8,["icon"])]),"append-inner":t(()=>[e(u)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),ft=C({__name:"index",setup(c){return(i,o)=>{const d=rt,s=nt,m=Ze;return y(),O(ie,null,[e(d),e(s),e(m)],64)}}});export{ft as default};
