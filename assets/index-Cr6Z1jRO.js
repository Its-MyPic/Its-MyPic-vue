import{_ as W}from"./index-CHg7QEYo.js";import{d as b,b as v,Q as f,U,m as e,R as a,V as m,W as M,F as I,O as x,u as V,X as D,Y as Z,y as A,Z as Y,_ as G}from"./@vue-BIgptj0v.js";import{e as S,f as K,g as $,h as P,i as z,j as y,k as E,l as j,u as X,n as N,o as O,p as L,q as J,r as ee,s as F,t as T,v as R,w as te,x as Q,y as ae,z as le}from"./vuetify-ebjySmj3.js";import{m as C,a as ne}from"./@mdi-CH1eX7jq.js";import{C as oe,t as se,c as ue}from"./opencc-js-D-mJJ3do.js";import"./vue-router-DyzBllaw.js";const re="MTMzNTEwMzQ1NzY4MTczNTc2MC9LT0lwZ2FDc3RmRURnVHVqR2dEYmVYWWZSLUdZRjVQQ29veXZ0TFVGbFhFM0tYdGRGTzhHR3RrTXptWEp4R3FxQVI5bw==",B={webhook:re},H=b({__name:"ReportDialog",props:{fileName:{type:String,required:!1,default:""},text:{type:String,required:!1,default:""}},setup(c){const r=c,u=v(""),o=v(""),l=v(!1),i=v(!1);async function g(){let d="";if(u.value&&(d+=`問題: ${u.value}
`),o.value&&(d+=`聯絡方式: ${o.value}
`),r.fileName&&(d+=`檔案名稱: ${r.fileName}
`),r.text&&(d+=`文字: ${r.text}
`),d){const n={content:d};await fetch(`https://discord.com/api/webhooks/${atob(B.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),l.value=!0}i.value=!1}return(d,n)=>(f(),U(I,null,[e(E,{modelValue:i.value,"onUpdate:modelValue":n[2]||(n[2]=t=>i.value=t),activator:"parent","max-width":"600px",style:{maxHeight:"90vh"},transition:"dialog-bottom-transition"},{default:a(()=>[e(S,null,{default:a(()=>[e(K,null,{default:a(()=>n[4]||(n[4]=[m("回報問題")])),_:1}),e($,null,{default:a(()=>[e(P,{label:"你遭遇到的問題(選填)",modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t),outlined:""},null,8,["modelValue"]),e(P,{label:"你的聯絡方式(選填)",modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=t=>o.value=t),outlined:""},null,8,["modelValue"])]),_:1}),e(z,null,{default:a(()=>[e(y,{onClick:g},{default:a(()=>n[5]||(n[5]=[m("送出")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:l.value,"onUpdate:modelValue":n[3]||(n[3]=t=>l.value=t),timeout:2e3,class:"text-center",rounded:"pill"},{default:a(()=>n[6]||(n[6]=[M("div",{class:"text-h6 mx-auto font-weight-bold text-center text-truncate"}," 已回報問題 ",-1)])),_:1},8,["modelValue"])],64))}}),ie=b({__name:"FooterComponent",setup(c){const r=X();function u(){r.global.name.value=r.global.current.value.dark?"light":"dark"}return(o,l)=>{const i=H;return f(),x(te,{app:""},{default:a(()=>[e(N,{fluid:""},{default:a(()=>[e(O,null,{default:a(()=>[e(L,null,{default:a(()=>[e(y,{variant:"outlined",size:"small",class:"text-center"},{default:a(()=>[l[4]||(l[4]=m(" 其他連結 ")),e(J,{activator:"parent",location:"center"},{default:a(()=>[e(ee,null,{default:a(()=>[e(F,{icon:`mdiSvg:${V(C)}`},null,8,["icon"]),(f(),x(T,{key:1,target:"_blank",value:1,"append-icon":V(C),href:"https://github.com/jeffpeng3/PowerToys-Run-Its-MyPic"},{default:a(()=>[e(R,null,{default:a(()=>l[0]||(l[0]=[m("PowerToys-Run Plugin")])),_:1})]),_:1},8,["append-icon"])),(f(),x(T,{key:2,target:"_blank",value:2,"append-icon":V(C),href:"https://github.com/jeffpeng3/krunner-Its-MyPic"},{default:a(()=>[e(R,null,{default:a(()=>l[1]||(l[1]=[m("Krunner Plugin")])),_:1})]),_:1},8,["append-icon"])),(f(),x(T,{key:3,target:"_blank",value:3,"append-icon":V(C),href:"https://github.com/jeffpeng3/Its-MyPic-vue"},{default:a(()=>[e(R,null,{default:a(()=>l[2]||(l[2]=[m("這個網頁的原始碼")])),_:1})]),_:1},8,["append-icon"])),(f(),x(T,{key:4,target:"_blank",value:4,"append-icon":V(C),href:"https://github.com/jeffpeng3/MyPicDB"},{default:a(()=>[e(R,null,{default:a(()=>l[3]||(l[3]=[m("mygo系列的截圖資料")])),_:1})]),_:1},8,["append-icon"]))]),_:1})]),_:1})]),_:1}),e(y,{variant:"outlined",size:"small",class:"text-center"},{default:a(()=>[l[5]||(l[5]=m(" 回報問題 ")),e(i)]),_:1}),e(y,{variant:"outlined",size:"small",class:"text-center",href:"https://forms.gle/WzW9PZwUU6gqHZko7",target:"_blank"},{default:a(()=>l[6]||(l[6]=[m(" 投稿 ")])),_:1})]),_:1}),e(L,{cols:"1"},{default:a(()=>[e(F,{size:"small",icon:V(ne),onClick:u},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),de="https://mygodata.0m0.uk/images/",ce=b({__name:"CardComponent",props:{episode:{type:String,required:!0},frame_start:{type:Number,required:!0},text:{type:String,required:!0}},setup(c){const r=c,u=v(`${de}${r.episode}_${r.frame_start}.jpg`),o=v(!1),l=v(!1),i=v(!1);async function g(){const t=await(await fetch(u.value)).blob(),p=URL.createObjectURL(t),s=document.createElement("a");s.href=p,s.download=`${r.text}.jpg`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(p)}const d=async()=>{try{const n=new ClipboardItem({"image/png":(async()=>{let t=new Image;t.src=u.value,t.crossOrigin="Anonymous",t.style.display="none",await new Promise(h=>{t.onload=h});let p=document.createElement("canvas"),s=p.getContext("2d")??new CanvasRenderingContext2D;p.width=t.width,p.height=t.height,s.drawImage(t,0,0);const _=p.toDataURL("image/png");return await(await fetch(_)).blob()})()});await navigator.clipboard.write([n]),l.value=!0}catch(n){const t={content:`Copy failed:
 ${n.message}

${n.stack}`};fetch(`https://discord.com/api/webhooks/${atob(B.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i.value=!0,console.log("Error: ",n.message)}};return(n,t)=>{const p=H;return f(),U(I,null,[e(S,{color:"surface-variant",rounded:"lg",variant:"tonal",onClick:t[0]||(t[0]=s=>o.value=!0)},{default:a(()=>[e(Q,{src:u.value,cover:"",width:"280px",height:"157px",alt:c.text},null,8,["src","alt"]),e($,{class:"card-text text-center justify-center"},{default:a(()=>[m(D(c.text),1)]),_:1})]),_:1}),e(E,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=s=>o.value=s),"max-width":"600px",style:{maxHeight:"90vh"}},{default:a(()=>[e(S,null,{default:a(()=>[e(Q,{src:u.value,style:{maxHeight:"70vh",objectFit:"contain"}},null,8,["src"]),e(z,null,{default:a(()=>[e(y,null,{default:a(()=>[t[4]||(t[4]=m(" 回報 ")),e(p,{fileName:u.value,text:c.text},null,8,["fileName","text"])]),_:1}),e(y,{onClick:g},{default:a(()=>t[5]||(t[5]=[m(" 下載 ")])),_:1}),e(y,{onClick:d},{default:a(()=>t[6]||(t[6]=[m("複製")])),_:1}),e($,null,{default:a(()=>[m(D(c.text),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=s=>l.value=s),timeout:2e3,class:"text-center",rounded:"pill"},{default:a(()=>t[7]||(t[7]=[M("div",{class:"text-h6 mx-auto font-weight-bold text-center text-truncate"}," 複製成功 ",-1)])),_:1},8,["modelValue"]),e(j,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=s=>i.value=s),timeout:2e3,class:"text-center",rounded:"pill"},{default:a(()=>t[8]||(t[8]=[M("div",{class:"text-h6 mx-auto font-weight-bold text-center text-truncate"}," 失敗 請按左下角回報手機型號/瀏覽器 ",-1)])),_:1},8,["modelValue"])],64)}}}),me=(c,r)=>{const u=c.__vccOpts||c;for(const[o,l]of r)u[o]=l;return u},pe=me(ce,[["__scopeId","data-v-c0871c8b"]]),fe=b({__name:"AppBarComponent",emits:["update:searchQuery"],setup(c,{emit:r}){const u=r,o=v(""),l=v(),i=()=>{clearTimeout(l.value),l.value=setTimeout(()=>u("update:searchQuery",o.value),500)},g=()=>{clearTimeout(l.value),u("update:searchQuery",o.value)},d=()=>{o.value="",u("update:searchQuery",o.value)};return(n,t)=>(f(),x(ae,{density:"prominent"},{default:a(()=>[e(N,null,{default:a(()=>[t[1]||(t[1]=M("div",{class:"text-h5 mx-auto font-weight-bold text-center text-truncate"}," MyGO Mujica 截圖搜尋器 ",-1)),e(L,{class:"text-center"},{default:a(()=>[e(P,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=p=>o.value=p),"single-line":"","hide-details":"",clearable:"",label:"搜尋",variant:"outlined",class:"short-search",onKeyup:Z(g,["enter"]),"onClick:clear":d,onInput:i},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))}}),ve=b({__name:"MainView",setup(c){const r=()=>W(()=>import("./data-DWSGMs4e.js"),[]),u=s=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),p(s)};let o=[];const l=v([]),i=v(o);let g=0;const d=()=>{const _=Math.floor((window.innerWidth-8)/304),w=Math.max(4,Math.floor(20/_)),h=g+_*w;l.value.push(...i.value.slice(g,h)),g=h},n=()=>{1.3*window.innerHeight+window.scrollY>=document.body.offsetHeight&&d()};A(()=>{r().then(s=>{o=s.default,i.value=o,d()}),window.addEventListener("scroll",n)}),Y(()=>{window.removeEventListener("scroll",n)});const t=oe(ue,se),p=s=>{if(s==="")i.value=o;else{const _=t(s.toLowerCase().replace("你","妳"));i.value=o.filter(w=>w.text.toLowerCase().replace("你","妳").includes(_))}g=0,l.value=[],d()};return(s,_)=>{const w=fe,h=pe,q=ie;return f(),U(I,null,[e(w,{"onUpdate:searchQuery":u}),e(N,{class:"fill-height",fluid:""},{default:a(()=>[e(le,{class:"align-start fill-height mx-auto"},{default:a(()=>[e(O,{class:"text-center justify-center"},{default:a(()=>[(f(!0),U(I,null,G(l.value,(k,ge)=>(f(),x(L,{key:k.segment_id,cols:"auto"},{default:a(()=>[e(h,{frame_start:k.frame_start,episode:k.episode,text:k.text},null,8,["frame_start","episode","text"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(q)],64)}}}),be=b({__name:"index",setup(c){return(r,u)=>{const o=ve;return f(),x(o)}}});export{be as default};
