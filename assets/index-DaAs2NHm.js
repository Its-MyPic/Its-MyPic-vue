import{k as $,r as h,D as x,I as te,X as l,F as r,a5 as b,a7 as y,J as Se,c as U,a2 as Ae,u as w,$ as D,B as Ne,E as V,L as Ce,w as W,l as ne,a8 as ie,O as Ge,a9 as qe,aa as ze,ab as Be,Y as Qe,ac as Ye}from"./@vue-CNCR8Vmv.js";import{e as J,f as We,g as se,h as ue,i as ce,j as S,k as ae,l as De,n as Je,o as X,p as G,u as He,q as Ze,r as Ke,s as Xe,t as ee,v as N,w as Y,x as be,y as _e,z as et,A as tt,B as xe,C as nt,D as at}from"./vuetify-eRZ44bXF.js";import{m as A,a as ke,b as ot,c as lt,d as rt}from"./@mdi-DKC2W5MC.js";import{d as oe,s as it}from"./pinia-CqnXpMGa.js";import{m as E}from"./protobufjs-BB8YXKI6.js";import{C as st,t as ut,c as dt}from"./opencc-js-D-mJJ3do.js";import"./typescript-B0P19iQY.js";import{G as ct}from"./gif.js-BUXYDTUc.js";import{G as ft}from"./vue-virtual-scroll-grid-DXBkyr0D.js";import"./@protobufjs-Cx6lg0nV.js";const pt="MTMzNTEwMzQ1NzY4MTczNTc2MC9LT0lwZ2FDc3RmRURnVHVqR2dEYmVYWWZSLUdZRjVQQ29veXZ0TFVGbFhFM0tYdGRGTzhHR3RrTXptWEp4R3FxQVI5bw==",mt={MyGO:{1:"https://www.youtube.com/watch?v=WOrYBIYIwyk",2:"https://www.youtube.com/watch?v=WOrYBIYIwyk",3:"https://www.youtube.com/watch?v=WOrYBIYIwyk",4:"https://www.youtube.com/watch?v=ijdspfPMzYc",5:"https://www.youtube.com/watch?v=zfA0zRAkAdk",6:"https://www.youtube.com/watch?v=UwgyEoB9vU8",7:"https://www.youtube.com/watch?v=rlY2b3TIYPs",8:"https://www.youtube.com/watch?v=mfboDpl88QY",9:"https://www.youtube.com/watch?v=ySjYENzyZmY",10:"https://www.youtube.com/watch?v=bLWDIYpGcEI",11:"https://www.youtube.com/watch?v=gAFDVnhX24o",12:"https://www.youtube.com/watch?v=wei3payuSi8",13:"https://www.youtube.com/watch?v=uQ3_PvPCNnI"},"Ave Mujica":{1:"https://www.youtube.com/watch?v=dxmmSFQxWzM",2:"https://www.youtube.com/watch?v=Bzl61esi4qc",3:"https://www.youtube.com/watch?v=HagaJboujK4",4:"https://www.youtube.com/watch?v=Z6cOxtDsfNU",5:"https://www.youtube.com/watch?v=7D2uGv7aprQ",6:"https://www.youtube.com/watch?v=jQraN1emvLQ",7:"https://www.youtube.com/watch?v=RONGNWb7OpQ",8:"https://www.youtube.com/watch?v=uh9jUhVTS28",9:"https://www.youtube.com/watch?v=pGrI6hk0vBg",10:"https://www.youtube.com/watch?v=m9cjOcCKIyQ",11:"https://www.youtube.com/watch?v=Cfm8TWGkvYQ"}},de={webhook:pt,videoLink:mt},Me=$({__name:"ReportDialog",props:{fileName:{type:String,required:!1,default:""},text:{type:String,required:!1,default:""}},setup(f){const o=f,n=h(""),e=h(""),t=h(!1),a=h(!1);async function p(){let u="";if(n.value&&(u+=`問題: ${n.value}
`),e.value&&(u+=`聯絡方式: ${e.value}
`),o.fileName&&(u+=`檔案名稱: ${o.fileName}
`),o.text&&(u+=`文字: ${o.text}
`),u){const d={content:u};await fetch(`https://discord.com/api/webhooks/${atob(de.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),t.value=!0}a.value=!1}return(u,d)=>(x(),te(Se,null,[l(ae,{modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=i=>a.value=i),activator:"parent","max-width":"600px",style:{maxHeight:"90vh"},transition:"dialog-bottom-transition"},{default:r(()=>[l(J,null,{default:r(()=>[l(We,null,{default:r(()=>d[4]||(d[4]=[b("回報問題")])),_:1}),l(se,null,{default:r(()=>[l(ue,{label:"你遭遇到的問題(選填)",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=i=>n.value=i),outlined:""},null,8,["modelValue"]),l(ue,{label:"你的聯絡方式(選填)",modelValue:e.value,"onUpdate:modelValue":d[1]||(d[1]=i=>e.value=i),outlined:""},null,8,["modelValue"])]),_:1}),l(ce,null,{default:r(()=>[l(S,{onClick:p},{default:r(()=>d[5]||(d[5]=[b("送出")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(De,{modelValue:t.value,"onUpdate:modelValue":d[3]||(d[3]=i=>t.value=i),timeout:2e3,class:"text-center",rounded:"pill"},{default:r(()=>d[6]||(d[6]=[y("div",{class:"text-h6 mx-auto font-weight-bold text-center text-truncate"}," 已回報問題 ",-1)])),_:1},8,["modelValue"])],64))}}),M=E.Reader,Ie=E.Writer,T=E.util,O=E.roots.default||(E.roots.default={}),vt=O.data=(()=>{const f={};return f.Info=function(){function o(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return o.prototype.text="",o.prototype.season=0,o.prototype.episode=0,o.prototype.frameStart=0,o.prototype.framePrefer=0,o.prototype.frameEnd=0,o.prototype.segmentId=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=Ie.create()),e.text!=null&&Object.hasOwnProperty.call(e,"text")&&t.uint32(10).string(e.text),e.season!=null&&Object.hasOwnProperty.call(e,"season")&&t.uint32(16).int32(e.season),e.episode!=null&&Object.hasOwnProperty.call(e,"episode")&&t.uint32(24).int32(e.episode),e.frameStart!=null&&Object.hasOwnProperty.call(e,"frameStart")&&t.uint32(32).int32(e.frameStart),e.framePrefer!=null&&Object.hasOwnProperty.call(e,"framePrefer")&&t.uint32(40).int32(e.framePrefer),e.frameEnd!=null&&Object.hasOwnProperty.call(e,"frameEnd")&&t.uint32(48).int32(e.frameEnd),e.segmentId!=null&&Object.hasOwnProperty.call(e,"segmentId")&&t.uint32(56).int32(e.segmentId),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,t){e instanceof M||(e=M.create(e));let a=t===void 0?e.len:e.pos+t,p=new O.data.Info;for(;e.pos<a;){let u=e.uint32();switch(u>>>3){case 1:{p.text=e.string();break}case 2:{p.season=e.int32();break}case 3:{p.episode=e.int32();break}case 4:{p.frameStart=e.int32();break}case 5:{p.framePrefer=e.int32();break}case 6:{p.frameEnd=e.int32();break}case 7:{p.segmentId=e.int32();break}default:e.skipType(u&7);break}}return p},o.decodeDelimited=function(e){return e instanceof M||(e=new M(e)),this.decode(e,e.uint32())},o.verify=function(e){return typeof e!="object"||e===null?"object expected":e.text!=null&&e.hasOwnProperty("text")&&!T.isString(e.text)?"text: string expected":e.season!=null&&e.hasOwnProperty("season")&&!T.isInteger(e.season)?"season: integer expected":e.episode!=null&&e.hasOwnProperty("episode")&&!T.isInteger(e.episode)?"episode: integer expected":e.frameStart!=null&&e.hasOwnProperty("frameStart")&&!T.isInteger(e.frameStart)?"frameStart: integer expected":e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&!T.isInteger(e.framePrefer)?"framePrefer: integer expected":e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&!T.isInteger(e.frameEnd)?"frameEnd: integer expected":e.segmentId!=null&&e.hasOwnProperty("segmentId")&&!T.isInteger(e.segmentId)?"segmentId: integer expected":null},o.fromObject=function(e){if(e instanceof O.data.Info)return e;let t=new O.data.Info;return e.text!=null&&(t.text=String(e.text)),e.season!=null&&(t.season=e.season|0),e.episode!=null&&(t.episode=e.episode|0),e.frameStart!=null&&(t.frameStart=e.frameStart|0),e.framePrefer!=null&&(t.framePrefer=e.framePrefer|0),e.frameEnd!=null&&(t.frameEnd=e.frameEnd|0),e.segmentId!=null&&(t.segmentId=e.segmentId|0),t},o.toObject=function(e,t){t||(t={});let a={};return t.defaults&&(a.text="",a.season=0,a.episode=0,a.frameStart=0,a.framePrefer=0,a.frameEnd=0,a.segmentId=0),e.text!=null&&e.hasOwnProperty("text")&&(a.text=e.text),e.season!=null&&e.hasOwnProperty("season")&&(a.season=e.season),e.episode!=null&&e.hasOwnProperty("episode")&&(a.episode=e.episode),e.frameStart!=null&&e.hasOwnProperty("frameStart")&&(a.frameStart=e.frameStart),e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&(a.framePrefer=e.framePrefer),e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&(a.frameEnd=e.frameEnd),e.segmentId!=null&&e.hasOwnProperty("segmentId")&&(a.segmentId=e.segmentId),a},o.prototype.toJSON=function(){return this.constructor.toObject(this,E.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Info"},o}(),f.Data=function(){function o(n){if(this.info=[],n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return o.prototype.info=T.emptyArray,o.create=function(e){return new o(e)},o.encode=function(e,t){if(t||(t=Ie.create()),e.info!=null&&e.info.length)for(let a=0;a<e.info.length;++a)O.data.Info.encode(e.info[a],t.uint32(10).fork()).ldelim();return t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,t){e instanceof M||(e=M.create(e));let a=t===void 0?e.len:e.pos+t,p=new O.data.Data;for(;e.pos<a;){let u=e.uint32();switch(u>>>3){case 1:{p.info&&p.info.length||(p.info=[]),p.info.push(O.data.Info.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return p},o.decodeDelimited=function(e){return e instanceof M||(e=new M(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.info!=null&&e.hasOwnProperty("info")){if(!Array.isArray(e.info))return"info: array expected";for(let t=0;t<e.info.length;++t){let a=O.data.Info.verify(e.info[t]);if(a)return"info."+a}}return null},o.fromObject=function(e){if(e instanceof O.data.Data)return e;let t=new O.data.Data;if(e.info){if(!Array.isArray(e.info))throw TypeError(".data.Data.info: array expected");t.info=[];for(let a=0;a<e.info.length;++a){if(typeof e.info[a]!="object")throw TypeError(".data.Data.info: object expected");t.info[a]=O.data.Info.fromObject(e.info[a])}}return t},o.toObject=function(e,t){t||(t={});let a={};if((t.arrays||t.defaults)&&(a.info=[]),e.info&&e.info.length){a.info=[];for(let p=0;p<e.info.length;++p)a.info[p]=O.data.Info.toObject(e.info[p],t)}return a},o.prototype.toJSON=function(){return this.constructor.toObject(this,E.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Data"},o}(),f})(),yt={style:{position:"relative"},class:"size"},wt=["src","alt"],ht={style:{position:"relative"}},gt={class:"text-h6 mx-auto font-weight-bold text-center text-truncate"},Pe="https://mypic.0m0.uk/images/",bt=$({__name:"CardComponent",props:{styles:{type:Object,required:!0},cardData:{type:Object,required:!0}},setup(f){const o=$e(),n=f,e=n.cardData.text,t=n.cardData.season,a=n.cardData.episode,p=n.cardData.frameStart,u=n.cardData.framePrefer,d=t==2?"Ave Mujica":"MyGO",i=`${d} 第${a}話`,c=`${a}`,s=de.videoLink[d][c],F=[0,0,34288,68333,0,0,0,0,0,0,0,0,0,0],R=Math.round((n.cardData.frameStart+(t==1?F[a]:0))/23.976),Re=`${s}&t=${R}s`,me=p/23.976,ve=`${Math.floor(me/60)}:${("0"+Math.floor(me%60)).slice(-2)}`,q=U(()=>`${Pe}${t}/${a}/${u}.webp`),le=h(!1),C=h(!1),I=h("連結複製成功"),j=h(!1),H=h(!1),Z=h(!1);async function Ue(v){return new Promise((m,P)=>{const g=new Image;g.crossOrigin="Anonymous",g.onload=()=>{const k=document.createElement("canvas"),B=k.getContext("2d");k.width=g.width,k.height=g.height,B==null||B.drawImage(g,0,0),m(g)},g.onerror=P,g.src=v})}async function Ee(){if(j.value)return;j.value=!0,I.value="GIF生成中...",C.value=!0;const v=performance.now();try{const m=new ct({workers:2,quality:10,workerScript:"/gif.worker.js"}),g=Array.from({length:n.cardData.frameEnd-n.cardData.frameStart+1},(_,L)=>n.cardData.frameStart+L).map(_=>{const L=`${Pe}${t}/${a}/${_}.webp`;return Ue(L)}),k=await Promise.all(g),B=Math.round(1e3/23.976);k.forEach(_=>{m.addFrame(_,{delay:B})}),m.on("finished",_=>{const L=URL.createObjectURL(_),Q=document.createElement("a");Q.href=L,Q.download=`${e}.gif`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(L);const Le=((performance.now()-v)/1e3).toFixed(1);j.value=!1,I.value=`GIF下載完成 (${Le}秒)`,C.value=!0}),m.on("error",_=>{z(_),j.value=!1,I.value="GIF生成失敗",C.value=!0}),m.render()}catch(m){z(m),j.value=!1,I.value="GIF生成失敗",C.value=!0}}async function Fe(){if(!H.value){H.value=!0,I.value="下載中...",C.value=!0;try{const v=await ge(),P=await(await fetch(v)).blob(),g=URL.createObjectURL(P),k=document.createElement("a");k.href=g,k.download=`${e}.png`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(g),I.value="下載完成"}catch(v){z(v),I.value="下載失敗"}finally{H.value=!1,C.value=!0}}}var ye=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);let re=!1;const we=async v=>{if(re&&!v){re=!1;return}if(v&&(re=!0,ye)){I.value="因瀏覽器限制，不支援長按複製連結",C.value=!0;return}if(Z.value)return;Z.value=!0,C.value=!1;const m=v||o.copyMode;try{m?await he():await je()}catch(P){if(z(P),ye)I.value="複製失敗，請稍後重試，或切換為複製連結";else try{await he(),I.value="複製圖片失敗，已複製連結"}catch(g){console.error("Error during copy:",g.message),I.value="失敗 請按左下角回報手機型號/瀏覽器",z(g)}}finally{Z.value=!1,C.value=!0}},he=async()=>{await navigator.clipboard.writeText(q.value),I.value="連結複製成功"},je=async()=>{const v=new ClipboardItem({"image/png":(async()=>{const m=await ge();return await(await fetch(m)).blob()})()});await navigator.clipboard.write([v]),I.value="圖片複製成功"};var K="";async function ge(){if(K)return K;let v=new Image;v.src=q.value,v.crossOrigin="Anonymous",v.style.display="none",await new Promise(g=>{v.onload=g});let m=document.createElement("canvas"),P=m.getContext("2d")??new CanvasRenderingContext2D;return m.width=v.width,m.height=v.height,P.drawImage(v,0,0),K=m.toDataURL("image/png"),K}async function z(v){const m={content:`Copy failed: ${v.name}

${navigator.userAgent}

${v.message}

${v.stack}`};try{await fetch(`https://discord.com/api/webhooks/${atob(de.webhook)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})}catch(P){console.error("Failed to send error report to Discord:",P)}}return(v,m)=>{const P=Me,g=Ae("long-press");return x(),te("div",{style:Ce(f.styles)},[l(J,{class:"card size",color:"surface-variant",rounded:"lg",variant:"tonal",onClick:m[0]||(m[0]=k=>le.value=!0)},{default:r(()=>[y("div",yt,[y("img",{src:q.value,class:"size",alt:w(e)},null,8,wt),y("div",{style:{position:"absolute",top:"0",right:"0",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 5px"}},D(i)+" "+D(ve))]),l(se,{class:"card-text text-center justify-center"},{default:r(()=>[b(D(w(e)),1)]),_:1})]),_:1}),l(ae,{modelValue:le.value,"onUpdate:modelValue":m[2]||(m[2]=k=>le.value=k),"max-width":"600px",style:{maxHeight:"90vh"}},{default:r(()=>[l(J,null,{default:r(()=>[y("div",ht,[l(Je,{src:q.value,style:{maxHeight:"70vh",objectFit:"contain"}},null,8,["src"]),y("div",{style:{position:"absolute",top:"0",right:"0",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 5px"}},D(i)+" "+D(ve))]),l(X,null,{default:r(()=>[l(G,null,{default:r(()=>[l(se,{class:"text-center"},{default:r(()=>[b(D(w(e)),1)]),_:1})]),_:1})]),_:1}),l(ce,null,{default:r(()=>[l(X,null,{default:r(()=>[l(S,null,{default:r(()=>[m[4]||(m[4]=b(" 回報 ")),l(P,{fileName:q.value,text:w(e)},null,8,["fileName","text"])]),_:1}),l(S,{onClick:Fe,loading:H.value},{default:r(()=>m[5]||(m[5]=[b("下載")])),_:1},8,["loading"]),l(S,{onClick:Ee,loading:j.value},{default:r(()=>m[6]||(m[6]=[b("GIF")])),_:1},8,["loading"]),Ne((x(),V(S,{onClick:m[1]||(m[1]=()=>we(!1)),loading:Z.value},{default:r(()=>m[7]||(m[7]=[b("複製")])),_:1},8,["loading"])),[[g,()=>we(!0)]]),l(S,{href:Re,target:"_blank"},{default:r(()=>m[8]||(m[8]=[b(" 從這裡開始看 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(De,{modelValue:C.value,"onUpdate:modelValue":m[3]||(m[3]=k=>C.value=k),timeout:2e3,class:"text-center",rounded:"pill"},{default:r(()=>[y("div",gt,D(I.value),1)]),_:1},8,["modelValue"])],4)}}}),Te=(f,o)=>{const n=f.__vccOpts||f;for(const[e,t]of o)n[e]=t;return n},xt=Te(bt,[["__scopeId","data-v-b59dce13"]]);var kt=vt.Data;const Ve=f=>f.toLowerCase().replace("你","妳").replace("啊","阿"),It=()=>st(dt,ut),fe=oe("Reverse",{state:()=>({reverse:!1})}),$e=oe("CopyMode",{state:()=>({copyMode:!1})}),pe=oe("Query",()=>{const f=h(""),o=h([]),n=h([]),e=h(0),t=()=>{const a=new URL(window.location.href);f.value===""?a.searchParams.delete("q"):a.searchParams.set("q",f.value);for(var p=0,u=1;u<14;u++)p|=+o.value.includes(u)<<u-1;for(var u=1;u<9;u++)p|=+n.value.includes(u)<<u+12;p==0?a.searchParams.delete("ep"):a.searchParams.set("ep",p.toString()),window.history.pushState({},"",a.toString())};return W(f,t),W(o,t),W(n,t),W(e,t),{query:f,mygoFilter:o,avemujicaFilter:n,characterFilter:e}}),Pt=oe("Data",()=>{const f=h([]),o=pe(),n=fe();n.$subscribe(()=>{f.value.reverse()});const e=It();var t=new Map;const a=U(()=>{if(f.value.length===0)return[];var u=f.value,d=new Set;if(o.mygoFilter.forEach(i=>{d.add(`1-${i}`)}),o.avemujicaFilter.forEach(i=>{d.add(`2-${i}`)}),d.size!==0){const i=n.reverse+Array.from(d).join("");t.has(i)?u=t.get(i)??[]:(u=f.value.filter(c=>d.has(`${c.season}-${c.episode}`)),t.set(i,u))}if(o.query==="")return u;{const i=e(Ve(o.query));return u.filter(c=>Ve(c.text).includes(i))}});return{cardsData:f,fetchData:async()=>{if(f.value.length===0){var u;try{var d=await(await fetch("/data/data.bin")).bytes();u=kt.decode(d).info}catch{u=[]}f.value=u,t.clear()}},filteredCards:a}}),Vt={key:0,class:"ml-2 d-flex align-center"},Ot=$({__name:"FooterComponent",setup(f){const o=$e(),n=h(!0),e=U({get(){return a.global.current.value.dark},set(c){p(c)}}),t=U({get(){return o.copyMode},set(c){o.copyMode=c,localStorage.setItem("copyURLMode",c.toString())}}),a=He();function p(c){a.global.name.value=c?"dark":"light",localStorage.setItem("darkTheme",a.global.name.value)}const u=()=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("firefox"),d=()=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("mobile"),i=()=>!(u()&&d());return ne(()=>{n.value=i(),n.value?localStorage.getItem("copyURLMode")?o.copyMode=localStorage.getItem("copyURLMode")==="true":o.copyMode=!1:o.copyMode=!0,localStorage.getItem("darkTheme")?a.global.name.value=localStorage.getItem("darkTheme")??"dark":window.matchMedia("(prefers-color-scheme: light)").matches&&(a.global.name.value="light")}),(c,s)=>{const F=Me;return x(),V(Ze,{app:""},{default:r(()=>[l(_e,{fluid:"",style:{padding:"5px"}},{default:r(()=>[l(X,null,{default:r(()=>[l(G,null,{default:r(()=>[l(S,{variant:"text",size:"small",class:"text-center"},{default:r(()=>[s[7]||(s[7]=b(" 其他連結 ")),l(Ke,{activator:"parent",location:"center"},{default:r(()=>[l(Xe,null,{default:r(()=>[l(ee,{icon:`mdiSvg:${w(A)}`},null,8,["icon"]),(x(),V(N,{key:0,target:"_blank",value:0,"append-icon":w(A),href:"https://github.com/NightFeather0615/Its-MyPic-Android"},{default:r(()=>[l(Y,null,{default:r(()=>s[2]||(s[2]=[b("Its-MyPic for Android")])),_:1})]),_:1},8,["append-icon"])),(x(),V(N,{key:1,target:"_blank",value:1,"append-icon":w(A),href:"https://github.com/Its-MyPic/PowerToys-Run-Its-MyPic"},{default:r(()=>[l(Y,null,{default:r(()=>s[3]||(s[3]=[b("PowerToys-Run Plugin")])),_:1})]),_:1},8,["append-icon"])),(x(),V(N,{key:2,target:"_blank",value:2,"append-icon":w(A),href:"https://github.com/Its-MyPic/krunner-Its-MyPic"},{default:r(()=>[l(Y,null,{default:r(()=>s[4]||(s[4]=[b("Krunner Plugin")])),_:1})]),_:1},8,["append-icon"])),(x(),V(N,{key:3,target:"_blank",value:3,"append-icon":w(A),href:"https://github.com/Its-MyPic/Its-MyPic-vue"},{default:r(()=>[l(Y,null,{default:r(()=>s[5]||(s[5]=[b("這個網頁的原始碼")])),_:1})]),_:1},8,["append-icon"])),(x(),V(N,{key:4,target:"_blank",value:4,"append-icon":w(A),href:"https://github.com/Its-MyPic/Its-MyPicDB"},{default:r(()=>[l(Y,null,{default:r(()=>s[6]||(s[6]=[b("mygo系列的截圖資料")])),_:1})]),_:1},8,["append-icon"]))]),_:1})]),_:1})]),_:1}),l(S,{variant:"text",size:"small",class:"text-center"},{default:r(()=>[s[8]||(s[8]=b(" 回報問題 ")),l(F)]),_:1}),l(S,{variant:"text",size:"small",class:"text-center",href:"https://forms.gle/WzW9PZwUU6gqHZko7",target:"_blank"},{default:r(()=>s[9]||(s[9]=[b(" 投稿 ")])),_:1})]),_:1}),l(G,{cols:"1"},{default:r(()=>[l(S,{variant:"text",size:"small",density:"comfortable",icon:w(ke)},{default:r(()=>[l(ee,{icon:w(ke),"aria-label":"設定"},null,8,["icon"]),l(ae,{activator:"parent","max-width":"600px",style:{maxHeight:"90vh",minHeight:"200px"}},{default:r(()=>[l(J,{class:"d-flex flex-column align-center justify-center font-weight-bold"},{default:r(()=>[s[14]||(s[14]=y("br",null,null,-1)),s[15]||(s[15]=y("span",{class:"ml-2 d-flex align-center"},"主題",-1)),l(G,{cols:"auto",class:"d-flex align-center"},{default:r(()=>[s[10]||(s[10]=y("span",{class:"mr-2 d-flex align-center"},"淺色",-1)),l(be,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=R=>e.value=R),class:"mx-2 d-flex align-center"},null,8,["modelValue"]),s[11]||(s[11]=y("span",{class:"ml-2 d-flex align-center"},"深色",-1))]),_:1}),s[16]||(s[16]=y("br",null,null,-1)),s[17]||(s[17]=y("span",{class:"ml-2 d-flex align-center"},"偏好複製模式",-1)),l(G,{cols:"auto",class:"d-flex align-center"},{default:r(()=>[s[12]||(s[12]=y("span",{class:"mr-2 d-flex align-center"},"複製圖片",-1)),l(be,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=R=>t.value=R),class:"mx-2 d-flex align-center",disabled:!n.value},null,8,["modelValue","disabled"]),s[13]||(s[13]=y("span",{class:"ml-2 d-flex align-center"},"複製連結",-1))]),_:1}),n.value?ie("",!0):(x(),te("span",Vt,"您的瀏覽器不支援複製圖片")),s[18]||(s[18]=y("br",null,null,-1))]),_:1})]),_:1})]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),St=$({__name:"ResultGrid",setup(f){const o=fe(),n=Pt();n.fetchData();const{filteredCards:e}=it(n);let t=h(4);const a=()=>{t.value=(1+Math.floor((window.innerWidth-320)/310))*8},p=U(()=>{typeof window<"u"&&window.scrollTo({top:0,left:0,behavior:"smooth"});const d=e.value;return o.reverse,(i,c)=>{const s=d.slice(i*c,(i+1)*c);return Promise.resolve(s)}}),u=d=>{var i;return(i=d.value)==null?void 0:i.segmentId};return ne(()=>{a(),window.addEventListener("resize",a)}),Ge(()=>{window.removeEventListener("resize",a)}),(d,i)=>(x(),V(qe,null,{default:r(()=>[l(w(ft),{length:w(e).length?w(e).length:1,pageSize:w(t),pageProvider:p.value,"get-key":u,"page-provider-debounce-time":100,class:"grid ma-5"},{placeholder:r(({index:c,style:s})=>[y("div",{class:"item",style:Ce(s)},D(w(e).length?"還在GO...":""),5)]),default:r(({item:c,style:s,index:F})=>[l(xt,{styles:s,cardData:c},null,8,["styles","cardData"])]),_:1},8,["length","pageSize","pageProvider"])]),fallback:r(()=>i[0]||(i[0]=[y("p",null,"Loading...",-1)])),_:1}))}}),Ct=Te(St,[["__scopeId","data-v-e1182e96"]]),Oe=$({__name:"MultiSelect",props:ze({items:{type:Array,required:!0},label:{type:String,required:!1,default:"Select"}},{modelValue:{type:Array,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const o=f,n=Be(f,"modelValue"),e=U(()=>n.value.length===o.items.length),t=U(()=>n.value.length>0&&n.value.length<o.items.length),a=()=>{e.value?n.value=[]:n.value=[...o.items]};return W(n,()=>{n.value.sort()}),(p,u)=>(x(),V(nt,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=d=>n.value=d),label:f.label,variant:"outlined",multiple:"",items:f.items,style:{"min-width":"250px"}},{"prepend-item":r(()=>[l(N,{title:"全選",onClick:a},{prepend:r(()=>[l(et,{indeterminate:t.value,"model-value":e.value},null,8,["indeterminate","model-value"])]),_:1}),l(tt,{class:"mt-2"})]),selection:r(({item:d,index:i})=>[n.value.length!=f.items.length?(x(),V(xe,{key:0},{default:r(()=>[y("span",null,D(d.value),1)]),_:2},1024)):ie("",!0),i===f.items.length-1?(x(),V(xe,{key:1},{default:r(()=>u[1]||(u[1]=[y("span",null,"全選",-1)])),_:1})):ie("",!0)]),_:1},8,["modelValue","label","items"]))}}),Dt=$({__name:"FilterDialog",setup(f){const o=pe(),n=h(!1),e=h([]),t=h([]),a=h([]),p=()=>{t.value=[],a.value=[],e.value=[]},u=()=>{o.mygoFilter=t.value,o.avemujicaFilter=a.value,o.characterFilter=0,n.value=!1};return ne(()=>{const i=new URLSearchParams(window.location.search).get("ep");if(i){for(var c=+i,s=0;c&&s<13;s++){const F=c&1;c=c>>1,F&&t.value.push(s+1)}for(var s=0;c&&s<13;s++){const R=c&1;c=c>>1,R&&a.value.push(s+1)}u()}}),(d,i)=>(x(),V(ae,{modelValue:n.value,"onUpdate:modelValue":i[2]||(i[2]=c=>n.value=c),"max-width":"600px",style:{"min-height":"600px"},transition:"dialog-top-transition"},{activator:r(({props:c})=>[l(ee,Qe(c,{icon:w(ot)}),null,16,["icon"])]),default:r(()=>[l(J,{class:"d-flex flex-column align-center justify-center font-weight-bold"},{default:r(()=>[i[3]||(i[3]=y("br",null,null,-1)),i[4]||(i[4]=y("br",null,null,-1)),i[5]||(i[5]=y("span",{class:"align-center"},"集數篩選",-1)),l(Oe,{items:Array.from({length:13},(c,s)=>s+1),modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=c=>t.value=c),label:"MyGO",style:{"min-width":"250px"}},null,8,["items","modelValue"]),l(Oe,{items:Array.from({length:11},(c,s)=>s+1),modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=c=>a.value=c),label:"Ave Mujica",style:{"min-width":"250px"}},null,8,["items","modelValue"]),l(ce,null,{default:r(()=>[l(S,{class:"text-center",text:"清除篩選",onClick:p}),l(S,{class:"text-center",text:"確定",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),_t=$({__name:"AppBarComponent",setup(f){const o=fe(),n=pe(),e=h(),t=h(""),a=()=>{clearTimeout(e.value),e.value=setTimeout(p,500)},p=()=>{clearTimeout(e.value),n.query=t.value},u=()=>{t.value="",n.query=""};return ne(()=>{const i=new URLSearchParams(window.location.search).get("q");i&&(t.value=i,n.query=i)}),(d,i)=>{const c=Dt;return x(),V(at,{density:"prominent"},{default:r(()=>[l(_e,null,{default:r(()=>[i[2]||(i[2]=y("div",{class:"text-h5 mx-auto font-weight-bold text-center text-truncate"}," MyGO Mujica 截圖搜尋器 ",-1)),l(X,{dense:"",class:"mt-2"},{default:r(()=>[l(G,{class:"text-center"},{default:r(()=>[l(ue,{modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=s=>t.value=s),"single-line":"","hide-details":"",clearable:"",label:"搜尋",variant:"outlined",class:"short-search",onKeyup:Ye(p,["enter"]),"onClick:clear":u,onInput:a,autofocus:""},{append:r(()=>[l(ee,{onClick:i[0]||(i[0]=s=>w(o).reverse=!w(o).reverse),icon:w(o).reverse?w(lt):w(rt)},null,8,["icon"])]),"append-inner":r(()=>[l(c)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Gt=$({__name:"index",setup(f){return(o,n)=>{const e=_t,t=Ct,a=Ot;return x(),te(Se,null,[l(e),l(t),l(a,{style:{width:"100%"}})],64)}}});export{Gt as default};
