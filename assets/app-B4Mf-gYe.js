const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Duk0N26a.js","assets/@vue-DGwzDw8D.js","assets/vuetify-YZfbSahQ.js","assets/vuetify-Cgw9w656.css","assets/@mdi-DKC2W5MC.js","assets/pinia-BgUsQrga.js","assets/@ffmpeg-B1ncfXmI.js","assets/vue-virtual-scroll-grid-C2yMUBdz.js","assets/vite-ssg-DGcsevya.js","assets/@unhead-DzUDaFIQ.js","assets/unhead-DvBx_Zm6.js","assets/hookable-B8xFkYCm.js","assets/vue-router-U4kGLTvU.js","assets/protobufjs-CgPuVhCO.js","assets/@protobufjs-f4nnaicZ.js","assets/opencc-js-kMbEc8rw.js","assets/index-DI6oqMCV.css"])))=>i.map(i=>d[i]);
var A=Object.defineProperty;var k=(i,t,r)=>t in i?A(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var E=(i,t,r)=>k(i,typeof t!="symbol"?t+"":t,r);import{V as j}from"./vite-ssg-DGcsevya.js";import{d as g,c as C}from"./pinia-BgUsQrga.js";import{m as y}from"./protobufjs-CgPuVhCO.js";import{r as d,S as w,d as F,w as M,k as q,l as B,L as R,a7 as N,A as U,B as V,C as O,Y as _}from"./@vue-DGwzDw8D.js";import{C as J,f as I}from"./opencc-js-kMbEc8rw.js";import{V as Q,a as G,c as Y,m as $,b as z,d as W}from"./vuetify-YZfbSahQ.js";import{_ as K}from"./unhead-DvBx_Zm6.js";import"./@unhead-DzUDaFIQ.js";import"./vue-router-U4kGLTvU.js";import"./@protobufjs-f4nnaicZ.js";import"./hookable-B8xFkYCm.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const p=y.Reader,b=y.Writer,m=y.util,c=y.roots.default||(y.roots.default={}),H=c.data=(()=>{const i={};return i.Info=function(){function t(r){if(r)for(let e=Object.keys(r),n=0;n<e.length;++n)r[e[n]]!=null&&(this[e[n]]=r[e[n]])}return t.prototype.text="",t.prototype.season=0,t.prototype.episode=0,t.prototype.frameStart=0,t.prototype.framePrefer=0,t.prototype.frameEnd=0,t.prototype.segmentId=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=b.create()),e.text!=null&&Object.hasOwnProperty.call(e,"text")&&n.uint32(10).string(e.text),e.season!=null&&Object.hasOwnProperty.call(e,"season")&&n.uint32(16).int32(e.season),e.episode!=null&&Object.hasOwnProperty.call(e,"episode")&&n.uint32(24).int32(e.episode),e.frameStart!=null&&Object.hasOwnProperty.call(e,"frameStart")&&n.uint32(32).int32(e.frameStart),e.framePrefer!=null&&Object.hasOwnProperty.call(e,"framePrefer")&&n.uint32(40).int32(e.framePrefer),e.frameEnd!=null&&Object.hasOwnProperty.call(e,"frameEnd")&&n.uint32(48).int32(e.frameEnd),e.segmentId!=null&&Object.hasOwnProperty.call(e,"segmentId")&&n.uint32(56).int32(e.segmentId),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof p||(e=p.create(e));let o=n===void 0?e.len:e.pos+n,a=new c.data.Info;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{a.text=e.string();break}case 2:{a.season=e.int32();break}case 3:{a.episode=e.int32();break}case 4:{a.frameStart=e.int32();break}case 5:{a.framePrefer=e.int32();break}case 6:{a.frameEnd=e.int32();break}case 7:{a.segmentId=e.int32();break}default:e.skipType(s&7);break}}return a},t.decodeDelimited=function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.text!=null&&e.hasOwnProperty("text")&&!m.isString(e.text)?"text: string expected":e.season!=null&&e.hasOwnProperty("season")&&!m.isInteger(e.season)?"season: integer expected":e.episode!=null&&e.hasOwnProperty("episode")&&!m.isInteger(e.episode)?"episode: integer expected":e.frameStart!=null&&e.hasOwnProperty("frameStart")&&!m.isInteger(e.frameStart)?"frameStart: integer expected":e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&!m.isInteger(e.framePrefer)?"framePrefer: integer expected":e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&!m.isInteger(e.frameEnd)?"frameEnd: integer expected":e.segmentId!=null&&e.hasOwnProperty("segmentId")&&!m.isInteger(e.segmentId)?"segmentId: integer expected":null},t.fromObject=function(e){if(e instanceof c.data.Info)return e;let n=new c.data.Info;return e.text!=null&&(n.text=String(e.text)),e.season!=null&&(n.season=e.season|0),e.episode!=null&&(n.episode=e.episode|0),e.frameStart!=null&&(n.frameStart=e.frameStart|0),e.framePrefer!=null&&(n.framePrefer=e.framePrefer|0),e.frameEnd!=null&&(n.frameEnd=e.frameEnd|0),e.segmentId!=null&&(n.segmentId=e.segmentId|0),n},t.toObject=function(e,n){n||(n={});let o={};return n.defaults&&(o.text="",o.season=0,o.episode=0,o.frameStart=0,o.framePrefer=0,o.frameEnd=0,o.segmentId=0),e.text!=null&&e.hasOwnProperty("text")&&(o.text=e.text),e.season!=null&&e.hasOwnProperty("season")&&(o.season=e.season),e.episode!=null&&e.hasOwnProperty("episode")&&(o.episode=e.episode),e.frameStart!=null&&e.hasOwnProperty("frameStart")&&(o.frameStart=e.frameStart),e.framePrefer!=null&&e.hasOwnProperty("framePrefer")&&(o.framePrefer=e.framePrefer),e.frameEnd!=null&&e.hasOwnProperty("frameEnd")&&(o.frameEnd=e.frameEnd),e.segmentId!=null&&e.hasOwnProperty("segmentId")&&(o.segmentId=e.segmentId),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,y.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Info"},t}(),i.Data=function(){function t(r){if(this.info=[],r)for(let e=Object.keys(r),n=0;n<e.length;++n)r[e[n]]!=null&&(this[e[n]]=r[e[n]])}return t.prototype.info=m.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=b.create()),e.info!=null&&e.info.length)for(let o=0;o<e.info.length;++o)c.data.Info.encode(e.info[o],n.uint32(10).fork()).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof p||(e=p.create(e));let o=n===void 0?e.len:e.pos+n,a=new c.data.Data;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{a.info&&a.info.length||(a.info=[]),a.info.push(c.data.Info.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}return a},t.decodeDelimited=function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.info!=null&&e.hasOwnProperty("info")){if(!Array.isArray(e.info))return"info: array expected";for(let n=0;n<e.info.length;++n){let o=c.data.Info.verify(e.info[n]);if(o)return"info."+o}}return null},t.fromObject=function(e){if(e instanceof c.data.Data)return e;let n=new c.data.Data;if(e.info){if(!Array.isArray(e.info))throw TypeError(".data.Data.info: array expected");n.info=[];for(let o=0;o<e.info.length;++o){if(typeof e.info[o]!="object")throw TypeError(".data.Data.info: object expected");n.info[o]=c.data.Info.fromObject(e.info[o])}}return n},t.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.info=[]),e.info&&e.info.length){o.info=[];for(let a=0;a<e.info.length;++a)o.info[a]=c.data.Info.toObject(e.info[a],n)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,y.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/data.Data"},t}(),i})();var X=(i=>(i[i.MYGO=1]="MYGO",i[i.AVE_MUJICA=2]="AVE_MUJICA",i))(X||{});const be={1:"MyGO",2:"Ave Mujica"},x=Array.from({length:13},(i,t)=>t+1),xe=23.976,Fe=[0,0,34288,68333,0,0,0,0,0,0,0,0,0];function Z(i){const t={text:i.text||"",season:i.season||0,episode:i.episode||0,segmentId:i.segmentId||0,frame:{start:i.frameStart||0,prefer:i.framePrefer||0,end:i.frameEnd||0}};return{...t,toJSON(){return{...t,frame:{...t.frame}}}}}const T=g("data",()=>{const i=d([]),t=d(!1),r=d(null),e=async()=>{if(!(i.value.length>0)){t.value=!0,r.value=null;try{const o=await(await fetch("/data/data.bin")).arrayBuffer(),a=H.Data.decode(new Uint8Array(o));i.value=a.info.map(s=>Z(s))}catch(n){r.value=n instanceof Error?n:new Error("Failed to fetch cards"),i.value=[]}finally{t.value=!1}}};return{cards:w(i),isLoading:w(t),error:w(r),fetchCards:e}}),ee=g("filter",()=>{const i=()=>{const u=new URLSearchParams(window.location.search).get("ep");if(!u)return{mygo:[],avemujica:[]};const l=parseInt(u),h=x.filter(f=>(l&1<<f-1)!==0),P=x.filter(f=>(l&1<<f+12)!==0);return{mygo:h,avemujica:P}},t=i(),r=d([...t.mygo]),e=d([...t.avemujica]),n=d(0),o=d([...t.mygo]),a=d([...t.avemujica]),s=d(0),D=F(()=>({mygo:new Set(o.value),avemujica:new Set(a.value),character:s.value}));function S(u,l){if(u.length!==l.length)return!1;const h=[...u].sort((f,v)=>f-v),P=[...l].sort((f,v)=>f-v);return h.every((f,v)=>f===P[v])}const L=()=>{const u=new URL(window.location.href);let l=0;o.value.forEach(f=>{l|=1<<f-1}),a.value.forEach(f=>{l|=1<<f+12});const h=u.searchParams.get("ep"),P=l===0?null:l.toString();return h===P?(console.debug("Filter params unchanged, skip updating URL"),!1):(l===0?u.searchParams.delete("ep"):u.searchParams.set("ep",l.toString()),window.history.pushState({},"",u.toString()),!0)};return{mygoEpisodesBuffer:r,avemujicaEpisodesBuffer:e,characterIdBuffer:n,mygoEpisodes:o,avemujicaEpisodes:a,characterId:s,activeFilters:D,flush:()=>{const u=S(r.value,o.value),l=S(e.value,a.value),h=n.value===s.value;return u&&l&&h?(console.debug("Filter state unchanged, skip updating"),!1):(o.value=[...r.value],a.value=[...e.value],s.value=n.value,L(),!0)},parseInitialEpisodes:i}});function te(i,t){let r;return function(...e){clearTimeout(r),r=setTimeout(()=>i(...e),t)}}const ne=[["你","妳"],["阿","啊"],["他","她"],["…","..."],["＂",'"'],["？","?"],["！","!"],["：",":"],["、","'"],["，",","]],re=J(I.cn,I.tw.concat([ne]));function oe(i){return re(i.trim()).toLowerCase()}const ie=g("search",()=>{const i=d(new URLSearchParams(window.location.search).get("q")||""),t=d(new URLSearchParams(window.location.search).get("q")||""),r=F(()=>t.value?oe(t.value):""),e=()=>{const o=new URL(window.location.href),a=o.searchParams.get("q"),s=t.value===""?null:t.value;return a===s?(console.debug("Query params unchanged, skip updating URL"),!1):(t.value===""?o.searchParams.delete("q"):o.searchParams.set("q",t.value),window.history.pushState({},"",o.toString()),!0)},n=()=>i.value===t.value?(console.debug("Query unchanged, skip updating"),!1):(t.value=i.value,e(),!0);return M(i,te(o=>{if(o===t.value){console.debug("Query unchanged, skip updating");return}t.value=o,e()},500)),{queryBuffer:i,query:t,normalizedQuery:r,flush:n}}),ae=q({__name:"App",setup(i){const t=T(),r=ie(),e=ee(),n=()=>{const o=new URLSearchParams(window.location.search).get("q")||"";r.queryBuffer=o,r.query=o;const a=e.parseInitialEpisodes();e.mygoEpisodes=[...a.mygo],e.avemujicaEpisodes=[...a.avemujica],e.mygoEpisodesBuffer=[...a.mygo],e.avemujicaEpisodesBuffer=[...a.avemujica]};return B(async()=>{await t.fetchCards(),window.addEventListener("popstate",n)}),R(()=>{window.removeEventListener("popstate",n)}),(o,a)=>{const s=N("router-view");return V(),U(G,null,{default:O(()=>[_(Q,null,{default:O(()=>[_(s)]),_:1})]),_:1})}}});class se{constructor(t,r,e=1300){E(this,"element");this.element=t,this.element._longPressCallBack=r,this.element._longPressStart=this.start,this.element._longPressStop=this.stop,this.element._longPressMove=this.move,this.element._longPressDelay=e,this.element._longPressDestroy=this.destroy(this.element),this.element._longPressIsStart=!1,this.element._longPressTimer=null,this.element.addEventListener("pointerdown",this.element._longPressStart),this.element.addEventListener("pointerup",this.element._longPressStop),this.element.addEventListener("pointermove",this.element._longPressMove)}start(t){const r=this;r._longPressTimer===null&&!r._longPressIsStart&&(r._longPressIsStart=!0,r._longPressTimer=window.setTimeout(()=>{r._longPressCallBack(t),r._longPressStop(t)},r._longPressDelay))}stop(){const t=this;t._longPressTimer&&clearTimeout(t._longPressTimer),t._longPressTimer=null,t._longPressIsStart=!1}move(t){const r=this;r._longPressIsStart&&(r._longPressTimer&&clearTimeout(r._longPressTimer),r._longPressTimer=window.setTimeout(()=>{r._longPressCallBack(t),r._longPressStop(t)},r._longPressDelay))}destroy(t){return()=>{t.removeEventListener("pointerdown",this.start),t.removeEventListener("pinterup",this.stop),t.removeEventListener("pointermove",this.move)}}}function le(i,t){new se(i,t.value,250)}function fe(i){i._longPressDestroy()}const ue={mounted:le,beforeUnmount:fe},ce=Y({blueprint:W,icons:{defaultSet:"mdi",aliases:z,sets:{mdi:$}},theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}}),de=[{path:"/",name:"/",component:()=>K(()=>import("./index-Duk0N26a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))}];j(ae,{routes:de},({app:i,router:t,initialState:r})=>{i.use(ce),i.directive("longPress",ue);const e=C();i.use(e),e.state.value=r.pinia||{},T(e).fetchCards()});export{x as E,xe as F,Fe as M,X as S,ee as a,ie as b,be as c,oe as n,T as u};
